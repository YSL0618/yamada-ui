import{j as h}from"./jsx-runtime-CfatFE5O.js";import{u as mt}from"./index-DKQLNlvR.js";import{u as ft,a as gt,b as ht}from"./index-B_YN6e7D.js";import{r as s}from"./index-ClcD9ViR.js";import{u as bt,f as vt}from"./form-control-zj-lY-eQ.js";import{L as St,q as tt,I as yt,n as Pt,a as U,d as Ct,h as X,r as _t,b,c as et}from"./factory-Nur_zO5a.js";import{r as rt,c as v}from"./number-CcP_arM8.js";import{h as xt,o as wt}from"./theme-provider-BsBO7Bt7.js";import{f as kt}from"./forward-ref-D13m8o2p.js";import{a as Rt}from"./use-component-style-DXYrx7jC.js";const jt=c=>{let p=[([l])=>({bg:`hsl(${l}, 100%, 50%)`,bgImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, transparent)"})];return c&&(p=[...p,{boxShadow:"rgba(0, 0, 0, .1) 0 0 0 1px inset, rgb(0, 0, 0, .15) 0 0 4px inset"}]),p},It=({focusThumbOnChange:c=!0,...p})=>{c||(p.isReadOnly=!0);const{id:l,name:w,defaultValue:k=[0,0,1],withShadow:$=!0,overlays:R=jt($),step:d=.01,thumbColor:j,value:E,onChange:A,onChangeEnd:D,onChangeStart:T,...m}=bt(p),[{"aria-readonly":Y,disabled:S,readOnly:y,required:I,...u},f]=St(m,vt),B=tt(T),V=tt(D),[F,K]=mt({defaultValue:k,value:E,onChange:A}),[G,H]=s.useState(!1),L=!(S||y);let[g,r,o]=F;r=v(r,0,1),o=v(o,0,1);const J=s.useRef(null),M=s.useRef(null),O=s.useRef(null),a=ft({eventSource:null,focusThumbOnChange:c,interactive:L,step:d,value:F}),N=gt(O),ot=s.useMemo(()=>R.map(t=>yt(t,[g,r,o])),[R,g,r,o]),at=s.useCallback(t=>{var Z;if(!M.current)return[];const{step:e}=a.current;a.current.eventSource="pointer";const{bottom:n,height:i,left:C,width:_}=M.current.getBoundingClientRect(),{clientX:x,clientY:dt}=((Z=t.touches)==null?void 0:Z[0])??t;let q=v((x-C)/_,0,1),z=v((n-dt)/i,0,1);return e&&(q=parseFloat(rt(q,0,e)),z=parseFloat(rt(z,0,e))),[q,z]},[a]),Q=t=>{const{value:e}=a.current,[n,i]=at(t);if(n==null||i==null)return;const[,C,_]=e;(n!==C||i!==_)&&K(([x])=>[x,n,i])},st=s.useCallback(()=>{const{focusThumbOnChange:t}=a.current;t&&setTimeout(()=>{var e;return(e=O.current)==null?void 0:e.focus()})},[a]),P=s.useCallback(([t,e])=>{const{interactive:n}=a.current;n&&(t=v(t,0,1),e=v(e,0,1),K(([i])=>[i,t,e]))},[a,K]),W=s.useCallback(t=>{const n={ArrowDown:()=>P([r,o-d]),ArrowLeft:()=>P([r-d,o]),ArrowRight:()=>P([r+d,o]),ArrowUp:()=>P([r,o+d])}[t.key];n&&(t.preventDefault(),t.stopPropagation(),n(t),a.current.eventSource="keyboard")},[a,P,r,o,d]);ht(J,{onMove:t=>{const{interactive:e}=a.current;e&&Q(t)},onSessionEnd:()=>{const{interactive:t,value:e}=a.current;t&&(H(!1),V(e))},onSessionStart:t=>{const{interactive:e,value:n}=a.current;e&&(H(!0),st(),Q(t),B(n))}}),Pt(()=>{const{eventSource:t,value:e}=a.current;t==="keyboard"&&V(e)},[F,V]);const it=s.useCallback((t={},e=null)=>({...t,...f,...u,ref:U(e,J),tabIndex:-1}),[f,u]),lt=s.useCallback((t={},e=null)=>{const{width:n}=N??{width:0},i={...t.style,...m.style,padding:`${n/2}px`};return{...t,ref:e,style:i}},[m,N]),ut=s.useCallback((t={},e=null)=>({...u,...t,id:l,ref:e,type:"hidden",name:w,disabled:S,readOnly:y,required:I,value:[g,r,o].toString()}),[u,l,w,g,r,o,I,S,y]),ct=s.useCallback((t={},e=null)=>({...u,...t,ref:U(e,M)}),[u]),pt=s.useCallback((t={},e=null)=>{const{height:n,width:i}=N??{height:0,width:0},C=r*100,_=o*100,x={...t.style,bottom:`calc(${_}% - ${n/2}px)`,left:`calc(${C}% - ${i/2}px)`,position:"absolute",touchAction:"none",userSelect:"none"};return{"aria-label":"Saturation and brightness thumb","aria-roledescription":"2D slider",bg:j??xt([g,r,o])(),...u,...t,ref:U(e,O),style:x,"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":r*100,"aria-valuetext":`Saturation ${r*100}%, Brightness ${o*100}%`,"data-active":Ct(G&&c),role:"slider",tabIndex:L&&c?0:void 0,onBlur:X(t.onBlur,m.onBlur),onFocus:X(t.onFocus,m.onFocus),onKeyDown:X(t.onKeyDown,W)}},[N,r,o,j,g,u,L,c,G,W,m]);return{overlays:ot,value:F,getContainerProps:it,getInnerProps:lt,getInputProps:ut,getThumbProps:pt,getTrackProps:ct}},nt=kt((c,p)=>{const[l,w]=Rt("SaturationSlider",c),{className:k,ratio:$=16/9,innerProps:R,inputProps:d,thumbProps:j,trackProps:E,__css:A,...D}=wt(w),{overlays:T,getContainerProps:m,getInnerProps:Y,getInputProps:S,getThumbProps:y,getTrackProps:I}=It(D),u={"& > *":{alignItems:"center",bottom:"0",display:"flex",h:"100%",justifyContent:"center",left:"0",position:"absolute",right:"0",top:"0",w:"100%"},position:"relative",_before:{content:'""',display:"block",h:0,pb:_t($,f=>`${1/f*100}%`)},...l.container,...A};return h.jsx(b.div,{className:et("ui-saturation-slider",k),__css:u,...m(),children:h.jsxs(b.div,{className:et("ui-saturation-slider__inner",k),__css:{...l.inner},...Y(R),children:[h.jsx(b.input,{...S(d,p)}),T.map((f,B)=>h.jsx(b.div,{className:"ui-saturation-slider__overlay",__css:{bottom:0,left:0,position:"absolute",right:0,top:0,...l.overlay},...f},B)),h.jsx(b.div,{className:"ui-saturation-slider__track",__css:{h:"100%",position:"relative",w:"100%",...l.track},...I(E),children:h.jsx(b.div,{className:"ui-saturation-slider__thumb",__css:{...l.thumb},...y(j)})})]})})});nt.displayName="SaturationSlider";nt.__ui__="SaturationSlider";export{nt as S};
