import{j as h}from"./extends-CwFRzn3r.js";import{u as dt}from"./index-423R83gY.js";import{u as ft,a as mt,b as gt}from"./index-DBhmtIcL.js";import{r as a}from"./index-BwDkhjyp.js";import{u as ht,f as bt}from"./form-control-DrDTnnc0.js";import{S as vt,k as tt,B as yt,f as Pt,a as q,d as St,h as X,r as Ct,b,c as et}from"./factory-DfCPDZht.js";import{r as rt,c as v}from"./number-CcP_arM8.js";import{h as xt,o as _t}from"./theme-provider-Bw55Thfs.js";import{f as kt}from"./forward-ref-BWI-Phbn.js";import{a as wt}from"./use-component-style-D0DGb12b.js";const It=c=>{let p=[([l])=>({bg:`hsl(${l}, 100%, 50%)`,bgImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, transparent)"})];return c&&(p=[...p,{boxShadow:"rgba(0, 0, 0, .1) 0 0 0 1px inset, rgb(0, 0, 0, .15) 0 0 4px inset"}]),p},Rt=({focusThumbOnChange:c=!0,...p})=>{c||(p.isReadOnly=!0);let{id:l,name:k,value:w,defaultValue:E=[0,0,1],onChange:N,onChangeStart:A,onChangeEnd:D,step:d=.01,thumbColor:I,withShadow:T=!0,overlays:R=It(T),...f}=ht(p);const[{"aria-readonly":Y,required:j,disabled:y,readOnly:P,...u},m]=vt(f,bt),B=tt(A),V=tt(D),[F,K]=dt({value:w,defaultValue:E,onChange:N}),[G,H]=a.useState(!1),M=!(y||P);let[g,r,s]=F;r=v(r,0,1),s=v(s,0,1);const J=a.useRef(null),O=a.useRef(null),z=a.useRef(null),o=ft({value:F,step:d,isInteractive:M,eventSource:null,focusThumbOnChange:c}),$=mt(z),nt=a.useMemo(()=>R.map(t=>yt(t,[g,r,s])),[R,g,r,s]),st=a.useCallback(t=>{var Z;if(!O.current)return[];const{step:e}=o.current;o.current.eventSource="pointer";const{bottom:n,left:i,height:C,width:x}=O.current.getBoundingClientRect(),{clientX:_,clientY:pt}=((Z=t.touches)==null?void 0:Z[0])??t;let L=v((_-i)/x,0,1),U=v((n-pt)/C,0,1);return e&&(L=parseFloat(rt(L,0,e)),U=parseFloat(rt(U,0,e))),[L,U]},[o]),Q=t=>{const{value:e}=o.current,[n,i]=st(t);if(n==null||i==null)return;const[,C,x]=e;(n!==C||i!==x)&&K(([_])=>[_,n,i])},ot=a.useCallback(()=>{const{focusThumbOnChange:t}=o.current;t&&setTimeout(()=>{var e;return(e=z.current)==null?void 0:e.focus()})},[o]),S=a.useCallback(([t,e])=>{const{isInteractive:n}=o.current;n&&(t=v(t,0,1),e=v(e,0,1),K(([i])=>[i,t,e]))},[o,K]),W=a.useCallback(t=>{const n={ArrowRight:()=>S([r+d,s]),ArrowUp:()=>S([r,s+d]),ArrowLeft:()=>S([r-d,s]),ArrowDown:()=>S([r,s-d])}[t.key];n&&(t.preventDefault(),t.stopPropagation(),n(t),o.current.eventSource="keyboard")},[o,S,r,s,d]);gt(J,{onSessionStart:t=>{const{isInteractive:e,value:n}=o.current;e&&(H(!0),ot(),Q(t),B(n))},onSessionEnd:()=>{const{isInteractive:t,value:e}=o.current;t&&(H(!1),V(e))},onMove:t=>{const{isInteractive:e}=o.current;e&&Q(t)}}),Pt(()=>{const{eventSource:t,value:e}=o.current;t==="keyboard"&&V(e)},[F,V]);const at=a.useCallback((t={},e=null)=>({...t,...m,...u,ref:q(e,J),tabIndex:-1}),[m,u]),it=a.useCallback((t={},e=null)=>{const{width:n}=$??{width:0},i={...t.style,...f.style,padding:`${n/2}px`};return{...t,ref:e,style:i}},[f,$]),lt=a.useCallback((t={},e=null)=>({...u,...t,id:l,ref:e,type:"hidden",name:k,value:[g,r,s].toString(),required:j,disabled:y,readOnly:P}),[u,l,k,g,r,s,j,y,P]),ut=a.useCallback((t={},e=null)=>({...u,...t,ref:q(e,O)}),[u]),ct=a.useCallback((t={},e=null)=>{const{width:n,height:i}=$??{width:0,height:0},C=r*100,x=s*100,_={...t.style,position:"absolute",userSelect:"none",touchAction:"none",left:`calc(${C}% - ${n/2}px)`,bottom:`calc(${x}% - ${i/2}px)`};return{"aria-label":"Saturation and brightness thumb",bg:I??xt([g,r,s])(),...u,...t,ref:q(e,z),tabIndex:M&&c?0:void 0,role:"slider","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-valuetext":`saturation ${r}, brightness ${s}`,"data-active":St(G&&c),onKeyDown:X(t.onKeyDown,W),onFocus:X(t.onFocus,f.onFocus),onBlur:X(t.onBlur,f.onBlur),style:_}},[$,r,s,I,g,u,M,c,G,W,f]);return{value:F,overlays:nt,getContainerProps:at,getInnerProps:it,getTrackProps:ut,getInputProps:lt,getThumbProps:ct}},Kt=kt((c,p)=>{const[l,k]=wt("SaturationSlider",c),{className:w,ratio:E=16/9,innerProps:N,inputProps:A,trackProps:D,thumbProps:d,__css:I,...T}=_t(k),{overlays:R,getContainerProps:f,getInnerProps:Y,getTrackProps:j,getInputProps:y,getThumbProps:P}=Rt(T),u={position:"relative",_before:{content:'""',display:"block",h:0,pb:Ct(E,m=>`${1/m*100}%`)},"& > *":{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",display:"flex",justifyContent:"center",alignItems:"center",w:"100%",h:"100%"},...l.container,...I};return h.jsx(b.div,{className:et("ui-saturation-slider",w),__css:u,...f(),children:h.jsxs(b.div,{className:et("ui-saturation-slider__inner",w),__css:{...l.inner},...Y(N),children:[h.jsx(b.input,{...y(A,p)}),R.map((m,B)=>h.jsx(b.div,{className:"ui-saturation-slider__overlay",__css:{position:"absolute",top:0,left:0,right:0,bottom:0,...l.overlay},...m},B)),h.jsx(b.div,{className:"ui-saturation-slider__track",__css:{position:"relative",w:"100%",h:"100%",...l.track},...j(D),children:h.jsx(b.div,{className:"ui-saturation-slider__thumb",__css:{...l.thumb},...P(d)})})]})})});export{Kt as S};
