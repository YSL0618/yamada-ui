import{j as m}from"./extends-CwFRzn3r.js";import{r as v}from"./index-BwDkhjyp.js";import{A as D,a as E,b as I,c as R}from"./alert-DgIzU9p9.js";import{C as k}from"./close-button-C6-nxxOU.js";import{u as B}from"./theme-provider-B8NHi_rL.js";import{m as h,c as C,b as S}from"./factory-CBW6YcbY.js";const w=(r,o)=>r.find(i=>i.id===o),g=(r,o)=>{const i=A(r,o);return{index:i?r[i].findIndex(e=>e.id===o):-1,placement:i}},A=(r,o)=>{for(const[i,c]of Object.entries(r))if(w(c,o))return i};let N=0;const O=(r,{id:o,style:i,duration:c,placement:e="top",status:t,onCloseComplete:n})=>(N+=1,o??(o=N),{id:o,style:i,duration:c,isDelete:!1,message:r,placement:e,status:t,onCloseComplete:n,onDelete:()=>d.remove(String(o),e)}),j=r=>{const{component:o}=r;return c=>typeof o=="function"?o({...c,...r}):m.jsx(F,{...c,...r})},P=(r,o)=>{var t,n;const i=((n=(t=o.__config)==null?void 0:t.notice)==null?void 0:n.options)??{},c=s=>h(i,h(r,s)),e=(s={})=>{s=c(s);const l=j(s);return d.create(l,s)};return e.update=(s,l)=>{l=c(l),d.update(s,l)},e.closeAll=d.closeAll,e.close=d.close,e.isActive=d.isActive,e},Q=r=>{const{theme:o}=B();return v.useMemo(()=>P(r??{},o),[r,o])},T={bottom:[],"bottom-left":[],"bottom-right":[],top:[],"top-left":[],"top-right":[]},z=r=>{let o=r;const i=new Set,c=e=>{o=e(o),i.forEach(t=>t())};return{close:e=>{c(t=>{const n=A(t,e);return n?{...t,[n]:t[n].map(s=>s.id==e?{...s,isDelete:!0}:s)}:t})},closeAll:({placement:e}={})=>{c(t=>{let n=["bottom","bottom-right","bottom-left","top","top-left","top-right"];return e&&(n=e),n.reduce((s,l)=>(s[l]=t[l].map(a=>({...a,isDelete:!0})),s),{...t})})},create:(e,t)=>{const n=t.limit,s=O(e,t),{id:l,placement:a}=s;return c(p=>{let u=p[a];if(n!==void 0&&n>0&&u.length>n-1){const b=u.length-(n-1),_=(a.includes("top")?u.slice(b*-1):u.slice(0,b)).map(({id:f})=>f);u=u.map(f=>_.includes(f.id)?{...f,isDelete:!0}:f)}const x=a.includes("top")?[s,...u]:[...u,s];return{...p,[a]:x}}),l},getSnapshot:()=>o,isActive:e=>!!g(d.getSnapshot(),e).placement,remove:(e,t)=>{c(n=>({...n,[t]:n[t].filter(s=>s.id!=e)}))},subscribe:e=>(i.add(e),()=>{c(()=>r),i.delete(e)}),update:(e,t)=>{c(n=>{const s={...n},{index:l,placement:a}=g(s,e);return a&&l!==-1&&s[a][l]&&(s[a][l]={...s[a][l],...t,message:j(t)}),s})}}},d=z(T),F=({className:r,colorScheme:o,variant:i="basic",closeStrategy:c="button",description:e,icon:t,isClosable:n,status:s,title:l,onClose:a})=>{const p=n&&(c==="button"||c==="both"),u=n&&(c==="element"||c==="both");return m.jsxs(D,{className:C("ui-notice",r),colorScheme:o,variant:i,alignItems:"start",boxShadow:"fallback(lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05))",pe:p?8:void 0,status:s,onClick:u?a:void 0,children:[m.jsx(E,{className:"ui-notice__icon",variant:t==null?void 0:t.variant,...t!=null&&t.color?{color:t.color}:{},children:t==null?void 0:t.children}),m.jsxs(S.div,{flex:"1",children:[l?m.jsx(I,{className:"ui-notice__title",lineClamp:1,children:l}):null,e?m.jsx(R,{className:"ui-notice__desc",lineClamp:3,children:e}):null]}),p?m.jsx(k,{className:"ui-notice__close-button",size:"sm",position:"absolute",right:2,top:2,onClick:x=>{x.stopPropagation(),a==null||a()}}):null]})};export{d as n,Q as u};
