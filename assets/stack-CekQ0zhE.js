import{j as g}from"./extends-CwFRzn3r.js";import{r as o}from"./index-BwDkhjyp.js";import{f as x}from"./forward-ref-BWI-Phbn.js";import{r as v,p as z,b as $,c as N,a as V}from"./factory-uBtAHRUq.js";const L=x(({className:u,align:r,children:e,direction:c="column",divider:j,gap:s="fallback(md, 1rem)",justify:k,wrap:S,...R},_)=>{const m=t=>t==="column"||t==="column-reverse",W=o.useMemo(()=>({borderBottomWidth:v(c,t=>m(t)?"1px":0),borderLeftWidth:v(c,t=>m(t)?0:"1px"),h:v(c,t=>m(t)?"fit-content":"100%"),w:v(c,t=>m(t)?"100%":"fit-content")}),[c]),y=z(e),E=j?y.map((t,b)=>{const n=typeof t.key<"u"?t.key:b,h=o.cloneElement(j,{__css:W});return g.jsxs(o.Fragment,{children:[b?h:null,t]},n)}):y,H=o.useMemo(()=>({alignItems:r,display:"flex",flexDirection:c,flexWrap:S,gap:s,justifyContent:k}),[r,c,S,s,k]);return g.jsx($.div,{ref:_,className:N("ui-stack",u),__css:H,...R,children:E})}),O=x(({className:u,...r},e)=>g.jsx(L,{ref:e,className:N("ui-stack--horizontal",u),align:"center",direction:"row",...r})),P=x(({className:u,...r},e)=>g.jsx(L,{ref:e,className:N("ui-stack--vertical",u),align:"stretch",direction:"column",w:"100%",...r})),q=x(({className:u,children:r,direction:e="bottom",fit:c=!0,gap:j="fallback(md, 1rem)",reverse:s=!1,startIndex:k=0,...S},R)=>{const _=o.useRef(new Map),[m,W]=o.useState({height:0,width:0}),y={minHeight:`${m.height}px`,minWidth:`${m.width}px`},E={overflow:"hidden",position:"relative",vars:[{name:"space",token:"spaces",value:j}],...c?y:{}},H=o.useCallback(n=>e.includes("top")?{[s?"top":"bottom"]:n}:e.includes("bottom")?{[s?"bottom":"top"]:n}:{[s?"bottom":"top"]:0},[e,s]),t=o.useCallback(n=>e.includes("left")?{[s?"left":"right"]:n}:e.includes("right")?{[s?"right":"left"]:n}:{[s?"right":"left"]:0},[e,s]),b=o.useMemo(()=>z(r).map((i,f)=>{const C=o.createRef();_.current.set(f,C);const d=i.key??f,w=k+f,l=`calc($space * ${f})`;let a={};a={...a,position:"absolute",zIndex:w},a={...a,...H(l)},a={...a,...t(l)};const p={...i.props,ref:V(i.ref,C),__css:a},M=o.cloneElement(i,p);return g.jsx(o.Fragment,{children:M},d)}),[r,k,H,t]);return o.useEffect(()=>{if(!c)return;let n=e.includes("left"),h=e.includes("top"),i=0,f=0;s&&(n=!n,h=!h);for(const C of _.current.values()){if(!C.current)continue;let{offsetHeight:d,offsetLeft:w,offsetParent:l,offsetTop:a,offsetWidth:p}=C.current;l&&(n&&(w=((l==null?void 0:l.offsetWidth)??0)-w-p),h&&(a=((l==null?void 0:l.offsetHeight)??0)-a-d),p+=w,d+=a,p>i&&(i=p),d>f&&(f=d))}W({height:f,width:i})},[b,e,s,c]),g.jsx($.div,{ref:R,className:N("ui-stack--depth",u),__css:E,...S,children:b})});export{O as H,L as S,P as V,q as Z};
