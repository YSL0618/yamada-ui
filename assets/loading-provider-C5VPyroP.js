import{j as t}from"./extends-CwFRzn3r.js";import{u as F}from"./index-ueIvHVr5.js";import{r as o}from"./index-BwDkhjyp.js";import{R as V}from"./Combination-IUp2vs9T.js";import{L as _}from"./loading-DndL1UZp.js";import{m as h,A as T}from"./factory-CY7vhjKt.js";import{b as N,e as u,f as U,g as q,j as G}from"./factory-CYpx3TMG.js";import{P as H}from"./portal-DfxMOg4r.js";const M=o.createContext({}),g=()=>({isLoading:o.createRef(),start:o.createRef(),finish:o.createRef(),update:o.createRef(),force:o.createRef()}),b=e=>({isLoading:()=>{var a,n;return((n=(a=e.current.isLoading).current)==null?void 0:n.call(a))??!1},start:a=>{var n,s;return(s=(n=e.current.start).current)==null?void 0:s.call(n,a)},finish:()=>{var a,n;return(n=(a=e.current.finish).current)==null?void 0:n.call(a)},update:a=>{var n,s;return(s=(n=e.current.update).current)==null?void 0:s.call(n,a)},force:a=>{var n,s;return(s=(n=e.current.force).current)==null?void 0:s.call(n,a)}}),J=e=>e+1,K=e=>e===0?e:e-1,oe=({screen:e,page:a,background:n,custom:s,children:i})=>{const c=o.useRef(g()),r=o.useRef(g()),x=o.useRef(g()),p=o.useRef(g()),k=b(c),m=b(r),R=b(x),L=b(p),v={screen:k,page:m,background:R,custom:L};return t.jsxs(M.Provider,{value:v,children:[i,t.jsx(j,{controlRefs:c,...e,component:(e==null?void 0:e.component)??(l=>t.jsx(I,{...l}))}),t.jsx(j,{controlRefs:r,...a,component:(a==null?void 0:a.component)??(l=>t.jsx(O,{...l}))}),t.jsx(j,{controlRefs:x,...n,blockScrollOnMount:(n==null?void 0:n.blockScrollOnMount)??!1,component:(n==null?void 0:n.component)??(l=>t.jsx(E,{...l}))}),t.jsx(j,{controlRefs:p,blockScrollOnMount:(n==null?void 0:n.blockScrollOnMount)??!1,...s,component:s==null?void 0:s.component})]})},j=({controlRefs:e,appendToParentPortal:a,containerRef:n,allowPinchZoom:s=!1,blockScrollOnMount:i=!0,initialState:c,duration:r=null,icon:x,text:p,component:k})=>{const m=o.useRef(!1),[{loadingCount:R,message:L,duration:v},l]=o.useState({loadingCount:c?1:0,message:void 0,duration:r}),{isLoading:A,start:W,finish:w,update:B,force:D}=o.useMemo(()=>({isLoading:()=>m.current,start:({message:f,duration:d=r}={})=>{m.current=!0,l(({loadingCount:y})=>({loadingCount:J(y),message:f,duration:d}))},update:f=>l(d=>({...d,...f})),finish:()=>{m.current=!1,l(({loadingCount:f})=>({loadingCount:K(f),message:void 0,duration:r}))},force:({loadingCount:f=0,message:d,duration:y=r})=>{m.current=!!f,l({loadingCount:f,message:d,duration:y})}}),[r]);u(e.current.isLoading,A),u(e.current.start,W),u(e.current.finish,w),u(e.current.update,B),u(e.current.force,D);const P={initialState:c,icon:x,text:p,message:L,duration:v,onFinish:w};return U(()=>{(c||q(r))&&l({loadingCount:c?1:0,message:void 0,duration:r})},[c,r]),t.jsx(T,{initial:!1,children:R?t.jsx(H,{appendToParentPortal:a,containerRef:n,children:t.jsx(V,{allowPinchZoom:s,enabled:i,forwardProps:!0,children:t.jsx(o.Fragment,{children:t.jsx(Q,{component:k,...P})})})}):null})},Q=({component:e,...a})=>typeof e=="function"?e(a):t.jsx(t.Fragment,{}),S=({message:e,...a})=>e?G(e)?e:t.jsx(N.p,{...a,children:e}):null,X=(e="fade")=>({initial:{opacity:0,scale:e==="scaleFade"?.95:void 0},animate:{opacity:1,scale:e==="scaleFade"?1:void 0,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:e==="scaleFade"?.95:void 0,transition:{duration:.4,ease:[.4,0,1,1]}}}),z=(e="fill")=>({position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:"fallback(beerus, 9999)",bg:e==="fill"?["fallback(white, #fbfbfb)","fallback(black, #141414)"]:"fallback(blackAlpha.600, rgba(0, 0, 0, 0.48))",w:"100vw",h:"100dvh",p:"fallback(4, 1rem)",display:"flex",justifyContent:"center",alignItems:"center"}),C=(e,a="fade")=>({initial:e?!1:"initial",animate:"animate",exit:"exit",variants:X(a)}),I=o.memo(({initialState:e,icon:a,text:n,message:s,duration:i,onFinish:c})=>{const r={maxW:"24rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"fallback(2, 0.5rem)"};return F(c,i),t.jsx(h.div,{className:"ui-loading-screen",...C(e),__css:z(),children:t.jsxs(N.div,{__css:r,children:[t.jsx(_,{fontSize:"6xl",...a}),t.jsx(S,{message:s,lineClamp:3,...n})]})})});I.displayName="ScreenComponent";const O=o.memo(({initialState:e,icon:a,text:n,message:s,duration:i,onFinish:c})=>{const r={bg:["fallback(white, #fbfbfb)","fallback(black, #141414)"],maxW:"24rem",p:"fallback(4, 1rem)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"fallback(2, 0.5rem)",rounded:"fallback(md, 0.375rem)",boxShadow:["fallback(lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05))","fallback(dark-lg, 0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4))"]};return F(c,i),t.jsx(h.div,{className:"ui-loading-page",...C(e),__css:z("transparent"),children:t.jsxs(h.div,{className:"ui-loading-page__inner",...C(e,"scaleFade"),__css:r,children:[t.jsx(_,{fontSize:"6xl",...a}),t.jsx(S,{message:s,lineClamp:3,...n})]})})});O.displayName="PageComponent";const E=o.memo(({initialState:e,icon:a,text:n,message:s,duration:i,onFinish:c})=>{const r={position:"fixed",right:"fallback(4, 1rem)",bottom:"fallback(4, 1rem)",zIndex:"fallback(beerus, 9999)",bg:["fallback(white, #fbfbfb)","fallback(black, #141414)"],maxW:"20rem",p:"fallback(2, 0.5rem)",display:"flex",justifyContent:"center",alignItems:"center",gap:"fallback(2, 0.5rem)",rounded:"fallback(md, 0.375rem)",boxShadow:["fallback(3xl, 0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 -25px 50px -12px rgba(0, 0, 0, 0.25))","fallback(dark-lg, 0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4))"]};return F(c,i),t.jsxs(h.div,{className:"ui-loading-background",...C(e,"scaleFade"),__css:r,children:[t.jsx(_,{fontSize:"xl",...a}),t.jsx(S,{message:s,fontSize:"sm",lineClamp:1,...n})]})});E.displayName="BackgroundComponent";const re=()=>{const{screen:e,page:a,background:n,custom:s}=o.useContext(M);return{screen:e,page:a,background:n,custom:s}};export{oe as L,re as u};
