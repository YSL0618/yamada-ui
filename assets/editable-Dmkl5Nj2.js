import{j as T}from"./jsx-runtime-CfatFE5O.js";import{u as ce}from"./index-DPt_fcIQ.js";import{u as de}from"./index-Bt_V34Vb.js";import{r as n}from"./index-ClcD9ViR.js";import{c as fe,f as be}from"./form-control-Y8qD5MxJ.js";import{p as me,C as pe,b as A,c as W,k as Ce,Z as Ee,u as ge,f as he,_ as X,a as S,h as d}from"./factory-COau3w21.js";import{f as z}from"./forward-ref-D13m8o2p.js";import{a as Pe}from"./use-component-style-CLSKeq_H.js";import{o as _e}from"./theme-provider-CNI9L2WW.js";const ye=f=>{const{id:i,defaultValue:b,isPreviewFocusable:l=!0,placeholder:a,selectAllOnFocus:m=!0,startWithEditView:M,submitOnBlur:B=!0,value:U,onCancel:_,onChange:L,onEdit:Z,onSubmit:y,...G}=fe(f),N=Ce(Z),{disabled:r,readOnly:u,required:x,...c}=Ee(G,be),[s,R]=n.useState(!!M&&!r),[o,k]=ce({defaultValue:b||"",value:U,onChange:L}),v=!s&&!r,D=o.length===0,[F,j]=n.useState(o),C=n.useRef(null),H=n.useRef(null),K=n.useRef(null),I=n.useRef(null),V=n.useRef(null);de({ref:C,elements:[I,V],enabled:s}),ge(()=>{var e,t;s&&((e=C.current)==null||e.focus(),m&&((t=C.current)==null||t.select()))},[]),he(()=>{var e,t,P;if(!s){(e=K.current)==null||e.focus();return}(t=C.current)==null||t.focus(),m&&((P=C.current)==null||P.select()),N()},[s,N,m]),n.useEffect(()=>{if(s)return;const e=C.current;(e==null?void 0:e.ownerDocument.activeElement)===e&&(e==null||e.blur())},[s]);const w=n.useCallback(e=>k(e.currentTarget.value),[k]),E=n.useCallback(()=>j(o),[o]),g=n.useCallback(()=>{v&&R(!0)},[v]),p=n.useCallback(()=>{R(!1),k(F),_==null||_(F)},[F,_,k]),h=n.useCallback(()=>{R(!1),j(o),y==null||y(o)},[y,o]),J=n.useCallback(e=>{if(!(e.key!=="Escape"&&e.key!=="Enter"))if(e.preventDefault(),e.key==="Escape")p();else{const{metaKey:t,shiftKey:P}=e;!P&&!t&&h()}},[p,h]),Q=n.useCallback(e=>{e.key==="Escape"&&(e.preventDefault(),p())},[p]),O=n.useCallback(e=>{if(!s)return;const t=e.currentTarget.ownerDocument,P=e.relatedTarget??t.activeElement,le=X(I.current,P),ue=X(V.current,P);!le&&!ue&&(B?h():p())},[s,B,h,p]),ne=n.useCallback((e={},t=null)=>({...e,ref:S(t,H),children:D?a:o,hidden:s,tabIndex:v&&l?0:void 0,onFocus:d(e.onFocus,g,E)}),[s,v,l,D,g,E,a,o]),se=n.useCallback((e={},t=null)=>({...c,...e,id:i,ref:S(t,C),disabled:r,hidden:!s,placeholder:a,readOnly:u,required:x,value:o,onBlur:d(e.onBlur,O),onChange:d(e.onChange,w),onFocus:d(e.onFocus,E),onKeyDown:d(e.onKeyDown,J)}),[r,i,s,O,w,J,E,a,u,x,c,o]),oe=n.useCallback((e={},t=null)=>({...c,...e,id:i,ref:S(t,C),disabled:r,hidden:!s,placeholder:a,readOnly:u,required:x,value:o,onBlur:d(e.onBlur,O),onChange:d(e.onChange,w),onFocus:d(e.onFocus,E),onKeyDown:d(e.onKeyDown,Q)}),[r,i,s,O,w,Q,E,a,u,x,c,o]),ae=n.useCallback((e={},t=null)=>({...c,...e,ref:S(t,K),type:"button",disabled:r,readOnly:u,onClick:d(e.onClick,g)}),[r,g,u,c]),ie=n.useCallback((e={},t=null)=>({...c,...e,ref:S(V,t),type:"button",disabled:r,readOnly:u,onClick:d(e.onClick,h)}),[r,h,u,c]),re=n.useCallback((e={},t=null)=>({...c,...e,ref:S(I,t),type:"button",disabled:r,readOnly:u,onClick:d(e.onClick,p)}),[r,p,u,c]);return{isEditing:s,value:o,getCancelProps:re,getEditProps:ae,getInputProps:se,getPreviewProps:ne,getSubmitProps:ie,getTextareaProps:oe,onCancel:p,onEdit:g,onSubmit:h}},Be=()=>{const{isEditing:f,getCancelProps:i,getEditProps:b,getSubmitProps:l}=q();return{isEditing:f,getCancelProps:i,getEditProps:b,getSubmitProps:l}},[xe,q]=me({name:"EditableContext",errorMessage:"useEditableContext: context is undefined. Seems you forgot to wrap the editable components in `<Editable />`"}),Y=z(({errorBorderColor:f,focusBorderColor:i,...b},l)=>{const[a,m]=Pe("Editable",{errorBorderColor:f,focusBorderColor:i,...b}),{className:M,children:B,defaultValue:U,isDisabled:_,isInvalid:L,isPreviewFocusable:Z,isReadOnly:y,isRequired:G,placeholder:N,selectAllOnFocus:r,startWithEditView:u,submitOnBlur:x,value:c,onCancel:s,onChange:R,onEdit:o,onSubmit:k,...v}=_e(m),{isEditing:D,getCancelProps:F,getEditProps:j,getInputProps:C,getPreviewProps:H,getSubmitProps:K,getTextareaProps:I,onCancel:V,onEdit:w,onSubmit:E}=ye({defaultValue:U,isDisabled:_,isInvalid:L,isPreviewFocusable:Z,isReadOnly:y,isRequired:G,placeholder:N,selectAllOnFocus:r,startWithEditView:u,submitOnBlur:x,value:c,onCancel:s,onChange:R,onEdit:o,onSubmit:k}),g=pe(B,{isEditing:D,onCancel:V,onEdit:w,onSubmit:E}),p={...a.container};return T.jsx(xe,{value:{isEditing:D,styles:a,getCancelProps:F,getEditProps:j,getInputProps:C,getPreviewProps:H,getSubmitProps:K,getTextareaProps:I},children:T.jsx(A.div,{ref:l,className:W("ui-editable",M),...v,__css:p,children:g})})});Y.displayName="Editable";Y.__ui__="Editable";const $=z(({className:f,...i},b)=>{const{styles:l,getPreviewProps:a}=q(),m={bg:"transparent",cursor:"text",display:"inline-block",fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",...l.preview};return T.jsx(A.span,{className:W("ui-editable__preview",f),...a(i,b),__css:m})});$.displayName="EditablePreview";$.__ui__="EditablePreview";const ee=z(({className:f,...i},b)=>{const{styles:l,getInputProps:a}=q(),m={bg:"transparent",fontSize:"inherit",fontWeight:"inherit",outline:0,textAlign:"inherit",...l.input};return T.jsx(A.input,{className:W("ui-editable__input",f),...a(i,b),__css:m})});ee.displayName="EditableInput";ee.__ui__="EditableInput";const te=z(({className:f,...i},b)=>{const{styles:l,getTextareaProps:a}=q(),m={bg:"transparent",fontSize:"inherit",fontWeight:"inherit",outline:0,textAlign:"inherit",...l.textarea};return T.jsx(A.textarea,{className:W("ui-editable__textarea",f),...a(i,b),__css:m})});te.displayName="EditableTextarea";te.__ui__="EditableTextarea";export{Y as E,$ as a,ee as b,te as c,Be as u};
