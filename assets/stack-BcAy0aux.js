import{j as g}from"./jsx-runtime-Nms4Y4qS.js";import{r as n}from"./index-BwDkhjyp.js";import{f as v}from"./forward-ref-DKTvpK5d.js";import{r as H,t as z,b as $,c as x,a as V}from"./factory-C2Uq3ahE.js";const L=v(({direction:s="column",justify:e,align:l,wrap:w,gap:o="fallback(md, 1rem)",divider:h,className:j,children:N,...R},S)=>{const u=t=>t==="column"||t==="column-reverse",W=n.useMemo(()=>({w:H(s,t=>u(t)?"100%":"fit-content"),h:H(s,t=>u(t)?"fit-content":"100%"),borderLeftWidth:H(s,t=>u(t)?0:"1px"),borderBottomWidth:H(s,t=>u(t)?"1px":0)}),[s]),_=z(N),E=h?_.map((t,k)=>{const c=typeof t.key<"u"?t.key:k,d=n.cloneElement(h,{__css:W});return g.jsxs(n.Fragment,{children:[k?d:null,t]},c)}):_,y=n.useMemo(()=>({display:"flex",flexDirection:s,justifyContent:e,alignItems:l,flexWrap:w,gap:o}),[l,s,w,o,e]);return g.jsx($.div,{ref:S,className:x("ui-stack",j),__css:y,...R,children:E})}),O=v(({className:s,...e},l)=>g.jsx(L,{ref:l,className:x("ui-stack--horizontal",s),direction:"row",align:"center",...e})),P=v(({className:s,...e},l)=>g.jsx(L,{ref:l,className:x("ui-stack--vertical",s),direction:"column",align:"stretch",w:"100%",...e})),q=v(({className:s,direction:e="bottom",startIndex:l=0,gap:w="fallback(md, 1rem)",reverse:o=!1,fit:h=!0,children:j,...N},R)=>{const S=n.useRef(new Map),[u,W]=n.useState({width:0,height:0}),_={minWidth:`${u.width}px`,minHeight:`${u.height}px`},E={position:"relative",overflow:"hidden",vars:[{name:"space",token:"spaces",value:w}],...h?_:{}},y=n.useCallback(c=>e.includes("top")?{[o?"top":"bottom"]:c}:e.includes("bottom")?{[o?"bottom":"top"]:c}:{[o?"bottom":"top"]:0},[e,o]),t=n.useCallback(c=>e.includes("left")?{[o?"left":"right"]:c}:e.includes("right")?{[o?"right":"left"]:c}:{[o?"right":"left"]:0},[e,o]),k=n.useMemo(()=>z(j).map((i,f)=>{const b=n.createRef();S.current.set(f,b);const r=i.key??f,p=l+f,m=`calc($space * ${f})`;let a={};a={...a,position:"absolute",zIndex:p},a={...a,...y(m)},a={...a,...t(m)};const C={...i.props,ref:V(i.ref,b),__css:a},M=n.cloneElement(i,C);return g.jsx(n.Fragment,{children:M},r)}),[j,l,y,t]);return n.useEffect(()=>{if(!h)return;let c=e.includes("left"),d=e.includes("top"),i=0,f=0;o&&(c=!c,d=!d);for(const b of S.current.values()){if(!b.current)continue;let{offsetParent:r,offsetWidth:p,offsetHeight:m,offsetTop:a,offsetLeft:C}=b.current;r&&(c&&(C=((r==null?void 0:r.offsetWidth)??0)-C-p),d&&(a=((r==null?void 0:r.offsetHeight)??0)-a-m),p+=C,m+=a,p>i&&(i=p),m>f&&(f=m))}W({width:i,height:f})},[k,e,o,h]),g.jsx($.div,{ref:R,className:x("ui-stack--depth",s),__css:E,...N,children:k})});export{O as H,L as S,P as V,q as Z};
