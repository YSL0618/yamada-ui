import{j as h}from"./extends-CwFRzn3r.js";import{u as mt}from"./index-tU9OGY6h.js";import{u as ft,a as gt,b as ht}from"./index-_SJuZBu6.js";import{r as a}from"./index-BwDkhjyp.js";import{u as bt,f as vt}from"./form-control-DTumWR9y.js";import{U as St,k as tt,z as yt,f as Pt,a as q,d as Ct,h as X,r as _t,b,c as et}from"./factory-CYpx3TMG.js";import{r as rt,c as v}from"./number-CcP_arM8.js";import{h as xt,o as kt}from"./theme-provider-BZKkW4ID.js";import{f as wt}from"./forward-ref-BWI-Phbn.js";import{a as It}from"./use-component-style-CfUS8Ki1.js";const Rt=c=>{let p=[([l])=>({bg:`hsl(${l}, 100%, 50%)`,bgImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, transparent)"})];return c&&(p=[...p,{boxShadow:"rgba(0, 0, 0, .1) 0 0 0 1px inset, rgb(0, 0, 0, .15) 0 0 4px inset"}]),p},jt=({focusThumbOnChange:c=!0,...p})=>{c||(p.isReadOnly=!0);let{id:l,name:k,value:w,defaultValue:$=[0,0,1],onChange:E,onChangeStart:A,onChangeEnd:D,step:d=.01,thumbColor:I,withShadow:T=!0,overlays:R=Rt(T),...m}=bt(p);const[{"aria-readonly":Y,required:j,disabled:S,readOnly:y,...u},f]=St(m,vt),V=tt(A),B=tt(D),[F,z]=mt({value:w,defaultValue:$,onChange:E}),[G,H]=a.useState(!1),K=!(S||y);let[g,r,o]=F;r=v(r,0,1),o=v(o,0,1);const J=a.useRef(null),M=a.useRef(null),O=a.useRef(null),s=ft({value:F,step:d,isInteractive:K,eventSource:null,focusThumbOnChange:c}),N=gt(O),ot=a.useMemo(()=>R.map(t=>yt(t,[g,r,o])),[R,g,r,o]),st=a.useCallback(t=>{var Z;if(!M.current)return[];const{step:e}=s.current;s.current.eventSource="pointer";const{bottom:n,left:i,height:C,width:_}=M.current.getBoundingClientRect(),{clientX:x,clientY:dt}=((Z=t.touches)==null?void 0:Z[0])??t;let U=v((x-i)/_,0,1),L=v((n-dt)/C,0,1);return e&&(U=parseFloat(rt(U,0,e)),L=parseFloat(rt(L,0,e))),[U,L]},[s]),Q=t=>{const{value:e}=s.current,[n,i]=st(t);if(n==null||i==null)return;const[,C,_]=e;(n!==C||i!==_)&&z(([x])=>[x,n,i])},at=a.useCallback(()=>{const{focusThumbOnChange:t}=s.current;t&&setTimeout(()=>{var e;return(e=O.current)==null?void 0:e.focus()})},[s]),P=a.useCallback(([t,e])=>{const{isInteractive:n}=s.current;n&&(t=v(t,0,1),e=v(e,0,1),z(([i])=>[i,t,e]))},[s,z]),W=a.useCallback(t=>{const n={ArrowRight:()=>P([r+d,o]),ArrowUp:()=>P([r,o+d]),ArrowLeft:()=>P([r-d,o]),ArrowDown:()=>P([r,o-d])}[t.key];n&&(t.preventDefault(),t.stopPropagation(),n(t),s.current.eventSource="keyboard")},[s,P,r,o,d]);ht(J,{onSessionStart:t=>{const{isInteractive:e,value:n}=s.current;e&&(H(!0),at(),Q(t),V(n))},onSessionEnd:()=>{const{isInteractive:t,value:e}=s.current;t&&(H(!1),B(e))},onMove:t=>{const{isInteractive:e}=s.current;e&&Q(t)}}),Pt(()=>{const{eventSource:t,value:e}=s.current;t==="keyboard"&&B(e)},[F,B]);const it=a.useCallback((t={},e=null)=>({...t,...f,...u,ref:q(e,J),tabIndex:-1}),[f,u]),lt=a.useCallback((t={},e=null)=>{const{width:n}=N??{width:0},i={...t.style,...m.style,padding:`${n/2}px`};return{...t,ref:e,style:i}},[m,N]),ut=a.useCallback((t={},e=null)=>({...u,...t,id:l,ref:e,type:"hidden",name:k,value:[g,r,o].toString(),required:j,disabled:S,readOnly:y}),[u,l,k,g,r,o,j,S,y]),ct=a.useCallback((t={},e=null)=>({...u,...t,ref:q(e,M)}),[u]),pt=a.useCallback((t={},e=null)=>{const{width:n,height:i}=N??{width:0,height:0},C=r*100,_=o*100,x={...t.style,position:"absolute",userSelect:"none",touchAction:"none",left:`calc(${C}% - ${n/2}px)`,bottom:`calc(${_}% - ${i/2}px)`};return{"aria-label":"Saturation and brightness thumb",bg:I??xt([g,r,o])(),...u,...t,ref:q(e,O),tabIndex:K&&c?0:void 0,role:"slider","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-valuetext":`saturation ${r}, brightness ${o}`,"data-active":Ct(G&&c),onKeyDown:X(t.onKeyDown,W),onFocus:X(t.onFocus,m.onFocus),onBlur:X(t.onBlur,m.onBlur),style:x}},[N,r,o,I,g,u,K,c,G,W,m]);return{value:F,overlays:ot,getContainerProps:it,getInnerProps:lt,getTrackProps:ct,getInputProps:ut,getThumbProps:pt}},nt=wt((c,p)=>{const[l,k]=It("SaturationSlider",c),{className:w,ratio:$=16/9,innerProps:E,inputProps:A,trackProps:D,thumbProps:d,__css:I,...T}=kt(k),{overlays:R,getContainerProps:m,getInnerProps:Y,getTrackProps:j,getInputProps:S,getThumbProps:y}=jt(T),u={position:"relative",_before:{content:'""',display:"block",h:0,pb:_t($,f=>`${1/f*100}%`)},"& > *":{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",display:"flex",justifyContent:"center",alignItems:"center",w:"100%",h:"100%"},...l.container,...I};return h.jsx(b.div,{className:et("ui-saturation-slider",w),__css:u,...m(),children:h.jsxs(b.div,{className:et("ui-saturation-slider__inner",w),__css:{...l.inner},...Y(E),children:[h.jsx(b.input,{...S(A,p)}),R.map((f,V)=>h.jsx(b.div,{className:"ui-saturation-slider__overlay",__css:{position:"absolute",top:0,left:0,right:0,bottom:0,...l.overlay},...f},V)),h.jsx(b.div,{className:"ui-saturation-slider__track",__css:{position:"relative",w:"100%",h:"100%",...l.track},...j(D),children:h.jsx(b.div,{className:"ui-saturation-slider__thumb",__css:{...l.thumb},...y(d)})})]})})});nt.displayName="SaturationSlider";nt.__ui__="SaturationSlider";export{nt as S};
