import{r as o}from"./index-ClcD9ViR.js";import{k as m,B as b}from"./factory-Cp1Ju9mN.js";const k=(e={})=>{const[r,c]=o.useState(e.defaultIsOpen??!1),t=o.useRef(e.timing??"after"),a=m(e.onOpen),u=m(e.onClose),i=e.isOpen!==void 0,s=e.isOpen!==void 0?e.isOpen:r,l=o.useCallback(async(...n)=>{t.current==="before"&&await a(...n),i||c(!0),t.current==="after"&&await a(...n)},[i,a,t]),f=o.useCallback(async(...n)=>{t.current==="before"&&await u(...n),i||c(!1),t.current==="after"&&await u(...n)},[i,u,t]),C=o.useCallback(async(...n)=>s?f(...n):l(...n),[s,l,f]);return{isOpen:s,onClose:f,onOpen:l,onToggle:C}},I=({disableCloseOnSuccess:e=!1,error:r,...c}={})=>{const{isOpen:t,onClose:a,onOpen:u,onToggle:i}=k(c),s=o.useRef(void 0),l=o.useRef(b),f=o.useCallback(async(...n)=>{const O=new Promise((d,p)=>{l.current=async(...w)=>{s.current=void 0,d(),e||await a(...w)},s.current=p});await u(...n),await O},[u,a,e]),C=o.useCallback(async(...n)=>{var O;(O=s.current)==null||O.call(s,r),await a(...n)},[a,r]);return{isOpen:t,onClose:C,onOpen:f,onSuccess:l.current,onToggle:i}},R=({enabled:e,isSelected:r,mode:c="unmount",wasSelected:t})=>!!(!e||r||c==="keepMounted"&&t);export{I as a,R as b,k as u};
