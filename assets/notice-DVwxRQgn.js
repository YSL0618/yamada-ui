import{j as m}from"./extends-CwFRzn3r.js";import{r as v}from"./index-BwDkhjyp.js";import{A as D,a as E,b as I,c as R}from"./alert-B0TkXEfE.js";import{C as k}from"./close-button-CrGbJmFz.js";import{u as B}from"./theme-provider-Bpmh2ODM.js";import{m as h,c as C,b as S}from"./factory-BgMvz7NM.js";const w=(c,n)=>c.find(i=>i.id===n),g=(c,n)=>{const i=A(c,n),s=i?c[i].findIndex(t=>t.id===n):-1;return{placement:i,index:s}},A=(c,n)=>{for(const[i,s]of Object.entries(c))if(w(s,n))return i};let N=0;const O=(c,{id:n,placement:i="top",duration:s,onCloseComplete:t,status:o,style:r})=>(N+=1,n??(n=N),{id:n,placement:i,status:o,duration:s,message:c,onDelete:()=>d.remove(String(n),i),isDelete:!1,onCloseComplete:t,style:r}),j=c=>{const{component:n}=c;return s=>typeof n=="function"?n({...s,...c}):m.jsx(F,{...s,...c})},P=(c,n)=>{var o,r;const i=((r=(o=n.__config)==null?void 0:o.notice)==null?void 0:r.options)??{},s=e=>h(i,h(c,e)),t=(e={})=>{e=s(e);const l=j(e);return d.create(l,e)};return t.update=(e,l)=>{l=s(l),d.update(e,l)},t.closeAll=d.closeAll,t.close=d.close,t.isActive=d.isActive,t},Q=c=>{const{theme:n}=B();return v.useMemo(()=>P(c??{},n),[c,n])},T={top:[],"top-left":[],"top-right":[],bottom:[],"bottom-left":[],"bottom-right":[]},z=c=>{let n=c;const i=new Set,s=t=>{n=t(n),i.forEach(o=>o())};return{getSnapshot:()=>n,subscribe:t=>(i.add(t),()=>{s(()=>c),i.delete(t)}),remove:(t,o)=>{s(r=>({...r,[o]:r[o].filter(e=>e.id!=t)}))},create:(t,o)=>{const r=o.limit,e=O(t,o),{placement:l,id:a}=e;return s(p=>{let u=p[l]??[];if(r!==void 0&&r>0&&u.length>r-1){const b=u.length-(r-1),_=(l.includes("top")?u.slice(b*-1):u.slice(0,b)).map(({id:f})=>f);u=u.map(f=>_.includes(f.id)?{...f,isDelete:!0}:f)}const x=l.includes("top")?[e,...u]:[...u,e];return{...p,[l]:x}}),a},update:(t,o)=>{s(r=>{const e={...r},{placement:l,index:a}=g(e,t);return l&&a!==-1&&(e[l][a]={...e[l][a],...o,message:j(o)}),e})},closeAll:({placement:t}={})=>{s(o=>{let r=["bottom","bottom-right","bottom-left","top","top-left","top-right"];return t&&(r=t),r.reduce((e,l)=>(e[l]=o[l].map(a=>({...a,isDelete:!0})),e),{...o})})},close:t=>{s(o=>{const r=A(o,t);return r?{...o,[r]:o[r].map(e=>e.id==t?{...e,isDelete:!0}:e)}:o})},isActive:t=>!!g(d.getSnapshot(),t).placement}},d=z(T),F=({variant:c="basic",colorScheme:n,status:i,icon:s,title:t,description:o,isClosable:r,closeStrategy:e="button",className:l,onClose:a})=>{const p=r&&(e==="button"||e==="both"),u=r&&(e==="element"||e==="both");return m.jsxs(D,{status:i,variant:c,colorScheme:n,alignItems:"start",boxShadow:"fallback(lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05))",className:C("ui-notice",l),pe:p?8:void 0,onClick:u?a:void 0,children:[m.jsx(E,{variant:s==null?void 0:s.variant,className:"ui-notice__icon",...s!=null&&s.color?{color:s.color}:{},children:s==null?void 0:s.children}),m.jsxs(S.div,{flex:"1",children:[t?m.jsx(I,{className:"ui-notice__title",lineClamp:1,children:t}):null,o?m.jsx(R,{className:"ui-notice__desc",lineClamp:3,children:o}):null]}),p?m.jsx(k,{className:"ui-notice__close-button",size:"sm",onClick:x=>{x.stopPropagation(),a==null||a()},position:"absolute",top:2,right:2}):null]})};export{d as n,Q as u};
