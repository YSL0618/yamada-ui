import{j as t}from"./extends-CwFRzn3r.js";import{u as _}from"./index-B7Zbs5MR.js";import{r}from"./index-BwDkhjyp.js";import{R as V}from"./Combination-IUp2vs9T.js";import{L as F}from"./loading-BAxQru_S.js";import{b as N,e as x,f as T,g as U,j as q}from"./factory-zMrA9M4D.js";import{m as h,A as G}from"./factory-ps7NpXEL.js";import{P as H}from"./portal-B1eO2HpC.js";const M=r.createContext({}),g=()=>({finish:r.createRef(),force:r.createRef(),isLoading:r.createRef(),start:r.createRef(),update:r.createRef()}),b=e=>({finish:()=>{var a,n;return(n=(a=e.current.finish).current)==null?void 0:n.call(a)},force:a=>{var n,s;return(s=(n=e.current.force).current)==null?void 0:s.call(n,a)},isLoading:()=>{var a,n;return((n=(a=e.current.isLoading).current)==null?void 0:n.call(a))??!1},start:a=>{var n,s;return(s=(n=e.current.start).current)==null?void 0:s.call(n,a)},update:a=>{var n,s;return(s=(n=e.current.update).current)==null?void 0:s.call(n,a)}}),J=e=>e+1,K=e=>e===0?e:e-1,oe=({background:e,children:a,custom:n,page:s,screen:c})=>{const l=r.useRef(g()),o=r.useRef(g()),p=r.useRef(g()),f=r.useRef(g()),k=b(l),d=b(o),R=b(p),L=b(f),v={background:R,custom:L,page:d,screen:k};return t.jsxs(M.Provider,{value:v,children:[a,t.jsx(j,{controlRefs:l,...c,component:(c==null?void 0:c.component)??(i=>t.jsx(I,{...i}))}),t.jsx(j,{controlRefs:o,...s,component:(s==null?void 0:s.component)??(i=>t.jsx(O,{...i}))}),t.jsx(j,{controlRefs:p,...e,blockScrollOnMount:(e==null?void 0:e.blockScrollOnMount)??!1,component:(e==null?void 0:e.component)??(i=>t.jsx(E,{...i}))}),t.jsx(j,{blockScrollOnMount:(e==null?void 0:e.blockScrollOnMount)??!1,controlRefs:f,...n,component:n==null?void 0:n.component})]})},j=({allowPinchZoom:e=!1,appendToParentPortal:a,blockScrollOnMount:n=!0,component:s,containerRef:c,controlRefs:l,duration:o=null,icon:p,initialState:f,text:k})=>{const d=r.useRef(!1),[{duration:R,loadingCount:L,message:v},i]=r.useState({duration:o,loadingCount:f?1:0,message:void 0}),{finish:w,force:A,isLoading:W,start:B,update:D}=r.useMemo(()=>({finish:()=>{d.current=!1,i(({loadingCount:m})=>({duration:o,loadingCount:K(m),message:void 0}))},force:({duration:m=o,loadingCount:u=0,message:y})=>{d.current=!!u,i({duration:m,loadingCount:u,message:y})},isLoading:()=>d.current,start:({duration:m=o,message:u}={})=>{d.current=!0,i(({loadingCount:y})=>({duration:m,loadingCount:J(y),message:u}))},update:m=>i(u=>({...u,...m}))}),[o]);x(l.current.isLoading,W),x(l.current.start,B),x(l.current.finish,w),x(l.current.update,D),x(l.current.force,A);const P={duration:R,icon:p,initialState:f,message:v,text:k,onFinish:w};return T(()=>{(f||U(o))&&i({duration:o,loadingCount:f?1:0,message:void 0})},[f,o]),t.jsx(G,{initial:!1,children:L?t.jsx(H,{appendToParentPortal:a,containerRef:c,children:t.jsx(V,{allowPinchZoom:e,enabled:n,forwardProps:!0,children:t.jsx(Q,{component:s,...P})})}):null})},Q=({component:e,...a})=>typeof e=="function"?e(a):null,S=({message:e,...a})=>e?q(e)?e:t.jsx(N.p,{...a,children:e}):null,X=(e="fade")=>({animate:{opacity:1,scale:e==="scaleFade"?1:void 0,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:e==="scaleFade"?.95:void 0,transition:{duration:.4,ease:[.4,0,1,1]}},initial:{opacity:0,scale:e==="scaleFade"?.95:void 0}}),z=(e="fill")=>({alignItems:"center",bg:e==="fill"?["fallback(white, #fbfbfb)","fallback(black, #141414)"]:"fallback(blackAlpha.600, rgba(0, 0, 0, 0.48))",bottom:0,display:"flex",h:"100dvh",justifyContent:"center",left:0,p:"fallback(4, 1rem)",position:"fixed",right:0,top:0,w:"100vw",zIndex:"fallback(beerus, 9999)"}),C=(e,a="fade")=>({animate:"animate",exit:"exit",initial:e?!1:"initial",variants:X(a)}),I=r.memo(({duration:e,icon:a,initialState:n,message:s,text:c,onFinish:l})=>{const o={alignItems:"center",display:"flex",flexDirection:"column",gap:"fallback(2, 0.5rem)",justifyContent:"center",maxW:"24rem"};return _(l,e),t.jsx(h.div,{className:"ui-loading-screen",...C(n),__css:z(),children:t.jsxs(N.div,{__css:o,children:[t.jsx(F,{fontSize:"6xl",...a}),t.jsx(S,{lineClamp:3,message:s,...c})]})})});I.displayName="ScreenComponent";const O=r.memo(({duration:e,icon:a,initialState:n,message:s,text:c,onFinish:l})=>{const o={alignItems:"center",bg:["fallback(white, #fbfbfb)","fallback(black, #141414)"],boxShadow:["fallback(lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05))","fallback(dark-lg, 0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4))"],display:"flex",flexDirection:"column",gap:"fallback(2, 0.5rem)",justifyContent:"center",maxW:"24rem",p:"fallback(4, 1rem)",rounded:"fallback(md, 0.375rem)"};return _(l,e),t.jsx(h.div,{className:"ui-loading-page",...C(n),__css:z("transparent"),children:t.jsxs(h.div,{className:"ui-loading-page__inner",...C(n,"scaleFade"),__css:o,children:[t.jsx(F,{fontSize:"6xl",...a}),t.jsx(S,{lineClamp:3,message:s,...c})]})})});O.displayName="PageComponent";const E=r.memo(({duration:e,icon:a,initialState:n,message:s,text:c,onFinish:l})=>{const o={alignItems:"center",bg:["fallback(white, #fbfbfb)","fallback(black, #141414)"],bottom:"fallback(4, 1rem)",boxShadow:["fallback(3xl, 0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 -25px 50px -12px rgba(0, 0, 0, 0.25))","fallback(dark-lg, 0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4))"],display:"flex",gap:"fallback(2, 0.5rem)",justifyContent:"center",maxW:"20rem",p:"fallback(2, 0.5rem)",position:"fixed",right:"fallback(4, 1rem)",rounded:"fallback(md, 0.375rem)",zIndex:"fallback(beerus, 9999)"};return _(l,e),t.jsxs(h.div,{className:"ui-loading-background",...C(n,"scaleFade"),__css:o,children:[t.jsx(F,{fontSize:"xl",...a}),t.jsx(S,{fontSize:"sm",lineClamp:1,message:s,...c})]})});E.displayName="BackgroundComponent";const re=()=>{const{background:e,custom:a,page:n,screen:s}=r.useContext(M);return{background:e,custom:a,page:n,screen:s}};export{oe as L,re as u};
