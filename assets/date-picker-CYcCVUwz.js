import{j as s}from"./extends-CwFRzn3r.js";import{u as rt}from"./index-BjUO4q1E.js";import{r as t}from"./index-BwDkhjyp.js";import{d as te,i as Ke,a as Le,b as lt,C as it}from"./calendar-CbJYp8cg.js";import{u as ct}from"./index-BaNhddRa.js";import{u as ut}from"./index-BM_Ccg1d.js";import{u as pt}from"./index-CWXuA_sE.js";import{u as dt,f as ft}from"./form-control-wNB_sh9j.js";import{u as mt,o as Ct}from"./theme-provider-CpaSpGZh.js";import{T as ht,S as Pt,a4 as gt,ag as kt,U as yt,a as oe,h as A,d as bt,l as vt,f as We,ah as _t,b as L,c as W,B as xt,t as Dt,j as jt}from"./factory-BjF4_dRw.js";import{P as It,b as Ot,a as wt}from"./popover-content-qljWb4pK.js";import{P as Ft}from"./portal-BL3IvHN0.js";import{b as Vt,a as Bt}from"./icon-Dq9f0XvE.js";import{f as ne}from"./forward-ref-BWI-Phbn.js";import{a as Et}from"./use-component-style-DVO-iEPi.js";const Rt=c=>{var Ye,Ae;const{theme:u}=mt();let{id:r,enableMultiple:C,enableRange:h,value:p,defaultValue:i,onChange:d,type:P,defaultType:g,onChangeType:D,month:E,defaultMonth:O,onChangeMonth:j,firstDayOfWeek:R,amountOfMonths:I,paginateBy:S,withWeekdays:M,disableOutsideDays:H,hiddenOutsideDays:z,minDate:f,maxDate:m,locale:k,yearFormat:b,monthFormat:T,weekdayFormat:N,dateFormat:o,weekendDays:a,today:v,excludeDate:y,calendarVariant:se,calendarSize:re,calendarColorScheme:le,holidays:ie,withHeader:ce,withControls:ue,withLabel:pe,maxSelectValues:de,__selectType:fe,calendarProps:me,allowInput:_=!0,allowInputBeyond:U=!1,parseDate:q,pattern:qe=/[^0-9\-\/]/g,inputFormat:G="YYYY/MM/DD",autoFocus:Y=!0,onClear:J,isOpen:Ge,defaultIsOpen:Je,onOpen:Qe,onClose:Xe,closeOnBlur:ee=!0,closeOnEsc:Ce=!0,openDelay:he,closeDelay:Pe,isLazy:ge,lazyBehavior:ke,animation:ye,duration:be=.2,offset:ve,gutter:_e,preventOverflow:xe,flip:De,matchWidth:je,boundary:Ie,eventListeners:Oe,strategy:we,placement:Fe="bottom-start",modifiers:Ve,onEnter:Be,onDelete:Ee,...w}=dt(c);r??(r=t.useId()),k??(k=((Ae=(Ye=u.__config)==null?void 0:Ye.date)==null?void 0:Ae.locale)??"en");const{"aria-readonly":zt,...F}=ht(w,ft),[Re,Ze]=Pt(w,gt),{disabled:Q,readOnly:X}=F,{isOpen:l,onOpen:Se,onClose:V}=ut({isOpen:Ge,defaultIsOpen:Je,onOpen:Qe,onClose:Xe}),Z=t.useRef(null),K=t.useRef(null),$e=t.useCallback(e=>{let n=(q==null?void 0:q(e))??te(e,G,k).toDate();if(n!=null&&!(y!=null&&y(n)))return U||(m&&Ke(n,m)&&(n=m),f&&Le(n,f)&&(n=f)),n},[U,y,G,k,m,f,q]),et=t.useCallback(e=>{if(e!=null&&!(y!=null&&y(e)))return U||(m&&Ke(e,m)&&(e=m),f&&Le(e,f)&&(e=f)),te(e).locale(k??"en").format(G)},[U,y,G,k,m,f]),x=t.useCallback(()=>{var e;Q||X||(Se(),Y&&_&&((e=K.current)==null||e.focus()))},[Y,_,Q,X,Se]),Te=t.useCallback(()=>{var e;l?Y&&_&&((e=K.current)==null||e.focus()):x()},[Y,_,l,x]),Ne=t.useCallback(()=>{l||x()},[l,x]),Me=t.useCallback(e=>{const n=kt(e);yt(Z.current,n)||ee&&l&&V()},[ee,l,V]),He=t.useCallback(e=>{if(e.key===" "&&(e.key=e.code),Q||X)return;const $={Space:l?void 0:B=>{B.preventDefault(),B.stopPropagation(),x()},Enter:l?Be:B=>{B.preventDefault(),B.stopPropagation(),x()},Escape:Ce?B=>{B.preventDefault(),B.stopPropagation(),V()}:void 0,Backspace:Ee}[e.key];$&&$(e)},[Ce,Q,X,l,V,Be,Ee,x]),ze=t.useCallback(e=>{var n;e.stopPropagation(),J==null||J(),Y&&_&&l&&((n=K.current)==null||n.focus())},[Y,_,l,J]);pt({ref:Z,handler:V,enabled:l&&ee});const tt=t.useCallback((e={},n=null)=>({ref:oe(Z,n),...Re,...e,...F,onClick:A(e.onClick,w.onClick,Te),onBlur:A(e.onBlur,w.onBlur,Me)}),[Re,F,Me,Te,w]),ot=t.useCallback(e=>({openDelay:he,closeDelay:Pe,isLazy:ge,lazyBehavior:ke,animation:ye,duration:be,offset:ve,gutter:_e,preventOverflow:xe,flip:De,matchWidth:je,boundary:Ie,eventListeners:Oe,strategy:we,placement:Fe,modifiers:Ve,...e,isOpen:l,onOpen:x,onClose:V,trigger:"never",closeOnButton:!1,closeOnBlur:!1}),[ye,Ie,Pe,be,Oe,De,_e,ge,l,ke,je,Ve,ve,V,x,he,Fe,xe,we]),nt=t.useCallback((e={},n=null)=>{const $={...e.style,..._?{}:{cursor:"pointer"}};return{ref:oe(K,n),tabIndex:_?-1:0,role:"combobox","aria-haspopup":"dialog","aria-controls":r,...e,...F,style:$,"data-active":bt(l),"aria-expanded":l,onFocus:A(e.onFocus,w.onFocus,Ne),onKeyDown:A(e.onKeyDown,w.onKeyDown,He)}},[r,_,F,l,w,Ne,He]),at=t.useCallback(e=>({...e,type:P,defaultType:g,onChangeType:D,month:E,defaultMonth:O,onChangeMonth:j,firstDayOfWeek:R,amountOfMonths:I,paginateBy:S,withWeekdays:M,disableOutsideDays:H,hiddenOutsideDays:z,yearFormat:b,monthFormat:T,weekdayFormat:N,dateFormat:o,weekendDays:a,today:v,holidays:ie,withHeader:ce,withControls:ue,withLabel:pe,maxSelectValues:de,variant:se,size:re,colorScheme:le,...me,value:p,defaultValue:i,onChange:d,minDate:f,maxDate:m,excludeDate:y,locale:k,__selectType:fe,enableMultiple:C,enableRange:h}),[z,de,C,h,I,le,me,re,se,o,O,g,i,H,y,R,ie,k,m,f,E,T,d,j,D,S,v,P,p,N,a,ue,ce,pe,M,b,fe]),st=t.useCallback(({clear:e,...n})=>({...n,...F,onClick:A(n.onClick,e?ze:void 0)}),[F,ze]);return{id:r,allowInput:_,pattern:qe,inputProps:Ze,formControlProps:F,containerRef:Z,inputRef:K,isOpen:l,onOpen:x,onClose:V,dateToString:et,stringToDate:$e,getContainerProps:tt,getPopoverProps:ot,getFieldProps:nt,getCalendarProps:at,getIconProps:st}},[St,ae]=vt({strict:!1,name:"DatePickerContext"}),Tt=({value:c,defaultValue:u,onChange:r,placeholder:C,closeOnSelect:h=!0,...p})=>{const[i,d]=ct({value:c,defaultValue:u,onChange:r,onUpdate:(o,a)=>!lt(o,a)}),{inputRef:P,id:g,allowInput:D,pattern:E,inputProps:O,formControlProps:j,onClose:R,dateToString:I,stringToDate:S,getContainerProps:M,getPopoverProps:H,getFieldProps:z,getCalendarProps:f,getIconProps:m}=Rt({...p,value:i,defaultValue:u,onChange:o=>{const a=I(o);d(o),b(a),h&&o&&R()},onClear:()=>{d(void 0),b(void 0)},onClose:()=>{var a;const o=I(i);b(o),(a=p.onClose)==null||a.call(p)}}),[k,b]=t.useState(I(i)),T=t.useCallback(o=>{let a=o.target.value;a=a.replace(E,"");const v=S(a);b(a),v&&te(v).isValid()?d(v):d(void 0)},[E,S,b,d]);We(()=>{d(c)},[c]),We(()=>{if(P.current&&_t(P.current))return;const o=I(i);b(o)},[i]);const N=t.useCallback((o={},a=null)=>{const v={...o.style,...O.style,...D?{}:{pointerEvents:"none"}};return{placeholder:C,...j,autoComplete:"off",...O,...o,ref:a,style:v,id:g,tabIndex:D?0:-1,value:k??"",cursor:j.readOnly?"default":"text",pointerEvents:j.disabled?"none":"auto",onChange:A(o.onChange,T)}},[O,D,C,j,g,k,T]);return{id:g,value:i,onClose:R,getContainerProps:M,getPopoverProps:H,getFieldProps:z,getInputProps:N,getIconProps:m,getCalendarProps:f}},oo=ne((c,u)=>{const[r,C]=Et("DatePicker",c);let{className:h,children:p,isClearable:i=!0,color:d,h:P,height:g,minH:D,minHeight:E,containerProps:O,contentProps:j,fieldProps:R,inputProps:I,iconProps:S,clearIconProps:M,portalProps:H={isDisabled:!0},...z}=Ct(C);const{getPopoverProps:f,getContainerProps:m,getCalendarProps:k,getFieldProps:b,getInputProps:T,getIconProps:N,onClose:o,value:a,id:v}=Tt(z);P??(P=g),D??(D=E);const y={w:"100%",h:"fit-content",color:d,...r.container};return s.jsx(St,{value:r,children:s.jsx(It,{...f(),children:s.jsxs(L.div,{className:W("ui-date-picker",h),__css:y,...m(O),children:[s.jsxs(L.div,{className:"ui-date-picker__inner",__css:{position:"relative",...r.inner},children:[s.jsx(Nt,{...b({h:P,minH:D,...R},u),inputProps:T(I)}),i&&a?s.jsx(Ht,{...N({clear:!0,...M})}):s.jsx(Ue,{...N({clear:!1,...S})})]}),s.jsx(Ft,{...H,children:s.jsxs(Ot,{as:"div",id:v,role:"dialog","aria-modal":"true",className:"ui-date-picker__content",__css:{...r.content},...j,children:[s.jsx(it,{className:"ui-date-picker__calendar",...k()}),xt(p,{value:a,onClose:o})]})})]})})})}),Nt=ne(({className:c,h:u,minH:r,inputProps:C,...h},p)=>{const i=ae(),{ref:d,...P}=C,g={pe:"2rem",h:u,minH:r,display:"flex",alignItems:"center",...i.field};return s.jsx(wt,{children:s.jsx(L.div,{className:W("ui-date-picker__field",c),__css:g,...h,children:s.jsx(L.input,{"aria-label":"Input date value",ref:oe(p,d),className:"ui-date-picker__field__input",display:"inline-block",w:"100%",...P})})})}),Ue=ne(({className:c,children:u,__css:r,...C},h)=>{const i={position:"absolute",top:"50%",transform:"translateY(-50%)",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",cursor:"pointer",...ae().icon,...r},P=Dt(u).map(g=>t.cloneElement(g,{focusable:!1,"aria-hidden":!0,style:{maxWidth:"1em",maxHeight:"1em",color:"currentColor"}}));return s.jsx(L.div,{ref:h,className:W("ui-date-picker__icon",c),__css:i,...C,children:jt(u)?P:s.jsx(Mt,{})})}),Mt=({className:c,...u})=>s.jsx(Vt,{className:W("ui-date-picker__icon__calendar",c),viewBox:"0 0 24 24",...u,children:s.jsx("path",{fill:"currentColor",d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),Ht=({className:c,children:u,...r})=>{const C=t.useRef(null),h=ae(),p=r.disabled,i=rt({ref:C,isDisabled:p,...r});return s.jsx(Ue,{"aria-label":"Clear value",className:W("ui-date-picker__icon--clear",c),__css:h.clearIcon,...i,children:u??s.jsx(Bt,{w:"0.5em",h:"0.5em"})})};export{oo as D,St as a,Nt as b,Ht as c,Ue as d,ae as e,Rt as u};
