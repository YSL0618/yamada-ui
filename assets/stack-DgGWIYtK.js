import{j as k}from"./jsx-runtime-CfatFE5O.js";import{r as o}from"./index-ClcD9ViR.js";import{f as v}from"./forward-ref-D13m8o2p.js";import{z as H,A as V,b as Z,c as x,a as T}from"./factory-Dfrbb1EY.js";const R=v(({className:u,align:i,children:e,direction:n="column",divider:C,gap:s="fallback(md, 1rem)",justify:_,wrap:y,...W},w)=>{const m=t=>t==="column"||t==="column-reverse",z=o.useMemo(()=>({borderBottomWidth:H(n,t=>m(t)?"1px":0),borderLeftWidth:H(n,t=>m(t)?0:"1px"),h:H(n,t=>m(t)?"fit-content":"100%"),w:H(n,t=>m(t)?"100%":"fit-content")}),[n]),N=V(e),E=C?N.map((t,g)=>{const c=typeof t.key<"u"?t.key:g,d=o.cloneElement(C,{__css:z});return k.jsxs(o.Fragment,{children:[g?d:null,t]},c)}):N,j=o.useMemo(()=>({alignItems:i,display:"flex",flexDirection:n,flexWrap:y,gap:s,justifyContent:_}),[i,n,y,s,_]);return k.jsx(Z.div,{ref:w,className:x("ui-stack",u),__css:j,...W,children:E})});R.displayName="Stack";R.__ui__="Stack";const $=v(({className:u,...i},e)=>k.jsx(R,{ref:e,className:x("ui-stack--horizontal",u),align:"center",direction:"row",...i}));$.displayName="HStack";$.__ui__="HStack";const L=v(({className:u,...i},e)=>k.jsx(R,{ref:e,className:x("ui-stack--vertical",u),align:"stretch",direction:"column",w:"100%",...i}));L.displayName="VStack";L.__ui__="VStack";const F=v(({className:u,children:i,direction:e="bottom",fit:n=!0,gap:C="fallback(md, 1rem)",reverse:s=!1,startIndex:_=0,...y},W)=>{const w=o.useRef(new Map),[m,z]=o.useState({height:0,width:0}),N={minHeight:`${m.height}px`,minWidth:`${m.width}px`},E={overflow:"hidden",position:"relative",vars:[{name:"space",token:"spaces",value:C}],...n?N:{}},j=o.useCallback(c=>e.includes("top")?{[s?"top":"bottom"]:c}:e.includes("bottom")?{[s?"bottom":"top"]:c}:{[s?"bottom":"top"]:0},[e,s]),t=o.useCallback(c=>e.includes("left")?{[s?"left":"right"]:c}:e.includes("right")?{[s?"right":"left"]:c}:{[s?"right":"left"]:0},[e,s]),g=o.useMemo(()=>V(i).map((r,f)=>{const S=o.createRef();w.current.set(f,S);const h=r.key??f,b=_+f,l=`calc($space * ${f})`;let a={};a={...a,position:"absolute",zIndex:b},a={...a,...j(l)},a={...a,...t(l)};const p={...r.props,ref:T(r.ref,S),__css:a},M=o.cloneElement(r,p);return k.jsx(o.Fragment,{children:M},h)}),[i,_,j,t]);return o.useEffect(()=>{if(!n)return;let c=e.includes("left"),d=e.includes("top"),r=0,f=0;s&&(c=!c,d=!d);for(const S of w.current.values()){if(!S.current)continue;let{offsetHeight:h,offsetLeft:b,offsetParent:l,offsetTop:a,offsetWidth:p}=S.current;l&&(c&&(b=((l==null?void 0:l.offsetWidth)??0)-b-p),d&&(a=((l==null?void 0:l.offsetHeight)??0)-a-h),p+=b,h+=a,p>r&&(r=p),h>f&&(f=h))}z({height:f,width:r})},[g,e,s,n]),k.jsx(Z.div,{ref:W,className:x("ui-stack--depth",u),__css:E,...y,children:g})});F.displayName="ZStack";F.__ui__="ZStack";export{$ as H,R as S,L as V,F as Z};
