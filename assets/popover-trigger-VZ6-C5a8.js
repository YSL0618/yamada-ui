import{j as F}from"./jsx-runtime-CfatFE5O.js";import{C as ge}from"./close-button-hZ5Z7fa0.js";import{f as Pe}from"./forward-ref-D13m8o2p.js";import{A as Ce,a as G,h as i,I as ye,aq as N,a3 as B,c as ne,g as be,at as he,b as Re,a4 as xe}from"./factory-Nur_zO5a.js";import{s as S}from"./slide-fade-Cmuj6chS.js";import{s as Be}from"./scale-fade-DZMuid-q.js";import{m as _e}from"./forward-ref-2BKBy0Yi.js";import{m as Te}from"./factory-C7oui4wX.js";import{r as t}from"./index-ClcD9ViR.js";import{b as Oe}from"./index-X5oM7jx7.js";import{u as we,b as Ee}from"./index-B1nZG4Mb.js";import{u as Fe,a as ke,b as Me}from"./index-DmyN1gVE.js";import{u as De}from"./index-CBbxfOTw.js";import{a as Ae}from"./use-component-style-DXYrx7jC.js";import{o as je}from"./theme-provider-BsBO7Bt7.js";const[Ne,J]=Ce({name:"PopoverContext",errorMessage:`usePopoverContext returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />"`}),re=p=>{const[f,n]=Ae("Popover",p);let{animation:y="scale",autoFocus:_=!0,children:d,closeDelay:g=200,closeOnBlur:u=!0,closeOnButton:L=!0,closeOnEsc:R=!0,duration:z,initialFocusRef:K,isLazy:k,isOpen:X,lazy:T,lazyBehavior:Y="unmount",open:M,openDelay:D=200,relatedRef:v,restoreFocus:q=!0,trigger:a="click",...H}=je(n);T??(T=k),M??(M=X);const b=t.useId(),{isOpen:o,onClose:r,onOpen:x,onToggle:l}=we({...n,isOpen:M}),O=t.useRef(null),A=t.useRef(null),Q=t.useRef(null),W=t.useRef(null),P=t.useRef(null),{present:ue,onAnimationComplete:ae}=Oe({ref:P,isOpen:o}),h=t.useRef(void 0),U=t.useRef(void 0),w=t.useRef(!1),Z=t.useRef(!1),{forceUpdate:$,referenceRef:j,transformOrigin:ee,getPopperProps:le}=De({...H,enabled:o});o&&(Z.current=!0),t.useEffect(()=>()=>{h.current&&clearTimeout(h.current),U.current&&clearTimeout(U.current)},[]),Fe({ref:A,enabled:o}),ke(P,{focusRef:A,shouldFocus:q&&(a==="click"||a==="contextmenu"),visible:o}),Me(P,{focusRef:K,shouldFocus:_&&(a==="click"||a==="contextmenu"),visible:o});const oe=Ee({enabled:T,isSelected:ue,mode:Y,wasSelected:Z.current}),ce=t.useCallback((e={},E=null)=>{var c,C;const s={id:b,"aria-describedby":(c=W.current)==null?void 0:c.id,"aria-hidden":!o,"aria-labelledby":(C=Q.current)==null?void 0:C.id,role:"dialog",...e,ref:G(P,E),style:{...e.style,transformOrigin:ee},children:oe?e.children:null,tabIndex:-1,onBlur:i(e.onBlur,m=>{const V=N(m),pe=B(P.current,V),de=B(A.current,V),ve=v!=null&&v.current?B(v.current,V):!1;o&&u&&(!pe&&!de&&!ve)&&r()}),onKeyDown:i(e.onKeyDown,m=>{R&&m.key==="Escape"&&r()})};return a==="hover"&&(s.onMouseEnter=i(e.onMouseEnter,()=>{w.current=!0}),s.onMouseLeave=i(e.onMouseLeave,m=>{m.nativeEvent.relatedTarget!==null&&(w.current=!1,u&&setTimeout(r,g))})),s},[g,u,R,o,r,oe,ee,a,v,b]),te=t.useCallback(e=>{O.current==null&&j(e)},[j]),fe=t.useCallback((e={},E=null)=>{const s={"aria-controls":o?b:void 0,"aria-expanded":o,role:"button",...e,ref:G(A,E,te)};return a==="click"&&(s.onClick=i(e.onClick,l),s.onBlur=i(e.onBlur,c=>{const C=N(c),m=!B(P.current,C);o&&u&&m&&r()})),a==="contextmenu"&&(s.onContextMenu=i(e.onContextMenu,c=>{c.preventDefault(),x()}),s.onBlur=i(e.onBlur,c=>{const C=N(c),m=!B(P.current,C);o&&u&&m&&r()})),a==="hover"&&(s.onFocus=i(e.onFocus,()=>{h.current===void 0&&x()}),s.onBlur=i(e.onBlur,c=>{const C=N(c),m=!B(P.current,C);o&&u&&m&&r()}),s.onKeyDown=i(e.onKeyDown,c=>{c.key==="Escape"&&r()}),s.onMouseEnter=i(e.onMouseEnter,()=>{w.current=!0,h.current=window.setTimeout(x,D)}),s.onMouseLeave=i(e.onMouseLeave,()=>{w.current=!1,h.current&&(clearTimeout(h.current),h.current=void 0),U.current=window.setTimeout(()=>{w.current||r()},g)})),s},[g,u,o,te,r,x,l,D,a,b]),me=t.useCallback((e={},E=null)=>({...e,ref:G(E,O,j)}),[O,j]);return F.jsx(Ne,{value:{id:b,animation:y,bodyRef:W,closeOnButton:L,duration:z,forceUpdate:$,headerRef:Q,open:o,styles:f,getAnchorProps:me,getPopoverProps:ce,getPopperProps:le,getTriggerProps:fe,onAnimationComplete:ae,onClose:r},children:ye(d,{forceUpdate:$,open:o,onClose:r})})};re.displayName="Popover";re.__ui__="Popover";const I=Pe(({onClick:p,...f},n)=>{const{id:y,styles:_,onClose:d}=J(),g={position:"absolute",..._.closeButton};return F.jsx(ge,{ref:n,className:ne("ui-popover__close-button"),size:"sm","aria-controls":y,"aria-label":"Close popover",onClick:i(p,u=>{u.stopPropagation(),d==null||d()}),__css:g,...f})});I.displayName="PopoverCloseButton";I.__ui__="PopoverCloseButton";const Se=(p="scale",f)=>{const n={duration:f,enter:{visibility:"visible"},reverse:!0,transitionEnd:{exit:{visibility:"hidden"}}};switch(p){case"scale":return{...Be,custom:{...n,scale:.95}};case"top":return{...S,custom:{...n,offsetX:0,offsetY:-16}};case"right":return{...S,custom:{...n,offsetX:16,offsetY:0}};case"left":return{...S,custom:{...n,offsetX:-16,offsetY:0}};case"bottom":return{...S,custom:{...n,offsetX:0,offsetY:16}}}},se=_e(({className:p,children:f,maxW:n,maxWidth:y,minW:_,minWidth:d,w:g,width:u,z:L,zIndex:R,containerProps:z,__css:K,...k},X)=>{let{animation:T,closeOnButton:Y,duration:M,isOpen:D,open:v,styles:q,getPopoverProps:a,getPopperProps:H,onAnimationComplete:b}=J();v??(v=D);const o=be(f),[r,...x]=he(o,I),l=K??q.container??{},O={display:"flex",flexDirection:"column",outline:0,position:"relative",w:"100%",...l};return u??(u=g),u??(u=l.width??l.w),d??(d=_),d??(d=l.minWidth??l.minW),y??(y=n),y??(y=l.maxWidth??l.maxW),R??(R=L),R??(R=l.zIndex??l.z),F.jsx(Re.div,{...H({style:{visibility:v?"visible":"hidden"}}),className:"ui-popover",maxWidth:y,minWidth:d,outline:"none",width:u,zIndex:R,...z,children:F.jsxs(Te.section,{className:ne("ui-popover__content",p),...T!=="none"?Se(T,M):{},...a(k,X),animate:v?"enter":"exit",exit:"exit",initial:"exit",onAnimationComplete:xe(b,k.onAnimationComplete),__css:O,children:[r??(Y?F.jsx(I,{}):null),x]})})});se.displayName="PopoverContent";se.__ui__="PopoverContent";const ie=({children:p})=>{const f=t.Children.only(p),{getTriggerProps:n}=J();return t.cloneElement(f,n(f.props,f.ref))};ie.displayName="PopoverTrigger";ie.__ui__="PopoverTrigger";export{re as P,ie as a,se as b,I as c,J as u};
