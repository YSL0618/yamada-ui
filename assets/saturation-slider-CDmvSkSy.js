import{j as h}from"./jsx-runtime-CfatFE5O.js";import{u as mt}from"./index-CSLw8Az-.js";import{u as ft,a as gt,b as ht}from"./index-B5I0A8KP.js";import{r as s}from"./index-ClcD9ViR.js";import{c as bt,f as vt}from"./form-control-DPI4oJtA.js";import{Z as St,k as tt,C as yt,f as Pt,a as q,d as Ct,h as X,r as _t,b,c as et}from"./factory-CehSyZ2b.js";import{r as rt,c as v}from"./number-CcP_arM8.js";import{h as xt,o as kt}from"./theme-provider-BOnS9RWG.js";import{f as wt}from"./forward-ref-D13m8o2p.js";import{a as Rt}from"./use-component-style-PhZ538dD.js";const jt=c=>{let p=[([l])=>({bg:`hsl(${l}, 100%, 50%)`,bgImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, transparent)"})];return c&&(p=[...p,{boxShadow:"rgba(0, 0, 0, .1) 0 0 0 1px inset, rgb(0, 0, 0, .15) 0 0 4px inset"}]),p},Ft=({focusThumbOnChange:c=!0,...p})=>{c||(p.isReadOnly=!0);const{id:l,name:k,defaultValue:w=[0,0,1],withShadow:$=!0,overlays:R=jt($),step:d=.01,thumbColor:j,value:E,onChange:A,onChangeEnd:D,onChangeStart:T,...m}=bt(p),[{"aria-readonly":Y,disabled:S,readOnly:y,required:F,...u},f]=St(m,vt),B=tt(T),V=tt(D),[I,K]=mt({defaultValue:w,value:E,onChange:A}),[Z,G]=s.useState(!1),M=!(S||y);let[g,r,o]=I;r=v(r,0,1),o=v(o,0,1);const H=s.useRef(null),O=s.useRef(null),z=s.useRef(null),a=ft({eventSource:null,focusThumbOnChange:c,interactive:M,step:d,value:I}),N=gt(z),ot=s.useMemo(()=>R.map(t=>yt(t,[g,r,o])),[R,g,r,o]),at=s.useCallback(t=>{var W;if(!O.current)return[];const{step:e}=a.current;a.current.eventSource="pointer";const{bottom:n,height:i,left:C,width:_}=O.current.getBoundingClientRect(),{clientX:x,clientY:dt}=((W=t.touches)==null?void 0:W[0])??t;let L=v((x-C)/_,0,1),U=v((n-dt)/i,0,1);return e&&(L=parseFloat(rt(L,0,e)),U=parseFloat(rt(U,0,e))),[L,U]},[a]),J=t=>{const{value:e}=a.current,[n,i]=at(t);if(n==null||i==null)return;const[,C,_]=e;(n!==C||i!==_)&&K(([x])=>[x,n,i])},st=s.useCallback(()=>{const{focusThumbOnChange:t}=a.current;t&&setTimeout(()=>{var e;return(e=z.current)==null?void 0:e.focus()})},[a]),P=s.useCallback(([t,e])=>{const{interactive:n}=a.current;n&&(t=v(t,0,1),e=v(e,0,1),K(([i])=>[i,t,e]))},[a,K]),Q=s.useCallback(t=>{const n={ArrowDown:()=>P([r,o-d]),ArrowLeft:()=>P([r-d,o]),ArrowRight:()=>P([r+d,o]),ArrowUp:()=>P([r,o+d])}[t.key];n&&(t.preventDefault(),t.stopPropagation(),n(t),a.current.eventSource="keyboard")},[a,P,r,o,d]);ht(H,{onMove:t=>{const{interactive:e}=a.current;e&&J(t)},onSessionEnd:()=>{const{interactive:t,value:e}=a.current;t&&(G(!1),V(e))},onSessionStart:t=>{const{interactive:e,value:n}=a.current;e&&(G(!0),st(),J(t),B(n))}}),Pt(()=>{const{eventSource:t,value:e}=a.current;t==="keyboard"&&V(e)},[I,V]);const it=s.useCallback((t={},e=null)=>({...t,...f,...u,ref:q(e,H),tabIndex:-1}),[f,u]),lt=s.useCallback((t={},e=null)=>{const{width:n}=N??{width:0},i={...t.style,...m.style,padding:`${n/2}px`};return{...t,ref:e,style:i}},[m,N]),ut=s.useCallback((t={},e=null)=>({...u,...t,id:l,ref:e,type:"hidden",name:k,disabled:S,readOnly:y,required:F,value:[g,r,o].toString()}),[u,l,k,g,r,o,F,S,y]),ct=s.useCallback((t={},e=null)=>({...u,...t,ref:q(e,O)}),[u]),pt=s.useCallback((t={},e=null)=>{const{height:n,width:i}=N??{height:0,width:0},C=r*100,_=o*100,x={...t.style,bottom:`calc(${_}% - ${n/2}px)`,left:`calc(${C}% - ${i/2}px)`,position:"absolute",touchAction:"none",userSelect:"none"};return{"aria-label":"Saturation and brightness thumb","aria-roledescription":"2D slider",bg:j??xt([g,r,o])(),...u,...t,ref:q(e,z),style:x,"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":r*100,"aria-valuetext":`Saturation ${r*100}%, Brightness ${o*100}%`,"data-active":Ct(Z&&c),role:"slider",tabIndex:M&&c?0:void 0,onBlur:X(t.onBlur,m.onBlur),onFocus:X(t.onFocus,m.onFocus),onKeyDown:X(t.onKeyDown,Q)}},[N,r,o,j,g,u,M,c,Z,Q,m]);return{overlays:ot,value:I,getContainerProps:it,getInnerProps:lt,getInputProps:ut,getThumbProps:pt,getTrackProps:ct}},nt=wt((c,p)=>{const[l,k]=Rt("SaturationSlider",c),{className:w,ratio:$=16/9,innerProps:R,inputProps:d,thumbProps:j,trackProps:E,__css:A,...D}=kt(k),{overlays:T,getContainerProps:m,getInnerProps:Y,getInputProps:S,getThumbProps:y,getTrackProps:F}=Ft(D),u={"& > *":{alignItems:"center",bottom:"0",display:"flex",h:"100%",justifyContent:"center",left:"0",position:"absolute",right:"0",top:"0",w:"100%"},position:"relative",_before:{content:'""',display:"block",h:0,pb:_t($,f=>`${1/f*100}%`)},...l.container,...A};return h.jsx(b.div,{className:et("ui-saturation-slider",w),__css:u,...m(),children:h.jsxs(b.div,{className:et("ui-saturation-slider__inner",w),__css:{...l.inner},...Y(R),children:[h.jsx(b.input,{...S(d,p)}),T.map((f,B)=>h.jsx(b.div,{className:"ui-saturation-slider__overlay",__css:{bottom:0,left:0,position:"absolute",right:0,top:0,...l.overlay},...f},B)),h.jsx(b.div,{className:"ui-saturation-slider__track",__css:{h:"100%",position:"relative",w:"100%",...l.track},...F(E),children:h.jsx(b.div,{className:"ui-saturation-slider__thumb",__css:{...l.thumb},...y(j)})})]})})});nt.displayName="SaturationSlider";nt.__ui__="SaturationSlider";export{nt as S};
