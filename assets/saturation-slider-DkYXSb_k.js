import{j as h}from"./jsx-runtime-CfatFE5O.js";import{u as mt}from"./index-DPt_fcIQ.js";import{u as ft,a as gt,b as ht}from"./index-BCBmayc8.js";import{r as a}from"./index-ClcD9ViR.js";import{u as bt,f as vt}from"./form-control-Co-DCdKP.js";import{Y as St,k as tt,C as yt,f as Pt,a as Y,d as Ct,h as q,r as _t,b,c as et}from"./factory-COau3w21.js";import{r as rt,c as v}from"./number-CcP_arM8.js";import{h as xt,o as kt}from"./theme-provider-CNI9L2WW.js";import{f as wt}from"./forward-ref-D13m8o2p.js";import{a as It}from"./use-component-style-CLSKeq_H.js";const Rt=c=>{let p=[([l])=>({bg:`hsl(${l}, 100%, 50%)`,bgImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, transparent)"})];return c&&(p=[...p,{boxShadow:"rgba(0, 0, 0, .1) 0 0 0 1px inset, rgb(0, 0, 0, .15) 0 0 4px inset"}]),p},jt=({focusThumbOnChange:c=!0,...p})=>{c||(p.isReadOnly=!0);let{id:l,name:k,defaultValue:w=[0,0,1],withShadow:$=!0,overlays:I=Rt($),step:d=.01,thumbColor:R,value:D,onChange:E,onChangeEnd:A,onChangeStart:T,...m}=bt(p);const[{"aria-readonly":X,disabled:S,readOnly:y,required:j,...u},f]=St(m,vt),V=tt(T),B=tt(A),[F,K]=mt({defaultValue:w,value:D,onChange:E}),[G,H]=a.useState(!1),M=!(S||y);let[g,r,o]=F;r=v(r,0,1),o=v(o,0,1);const J=a.useRef(null),O=a.useRef(null),z=a.useRef(null),s=ft({eventSource:null,focusThumbOnChange:c,isInteractive:M,step:d,value:F}),N=gt(z),ot=a.useMemo(()=>I.map(t=>yt(t,[g,r,o])),[I,g,r,o]),st=a.useCallback(t=>{var Z;if(!O.current)return[];const{step:e}=s.current;s.current.eventSource="pointer";const{bottom:n,height:i,left:C,width:_}=O.current.getBoundingClientRect(),{clientX:x,clientY:dt}=((Z=t.touches)==null?void 0:Z[0])??t;let L=v((x-C)/_,0,1),U=v((n-dt)/i,0,1);return e&&(L=parseFloat(rt(L,0,e)),U=parseFloat(rt(U,0,e))),[L,U]},[s]),Q=t=>{const{value:e}=s.current,[n,i]=st(t);if(n==null||i==null)return;const[,C,_]=e;(n!==C||i!==_)&&K(([x])=>[x,n,i])},at=a.useCallback(()=>{const{focusThumbOnChange:t}=s.current;t&&setTimeout(()=>{var e;return(e=z.current)==null?void 0:e.focus()})},[s]),P=a.useCallback(([t,e])=>{const{isInteractive:n}=s.current;n&&(t=v(t,0,1),e=v(e,0,1),K(([i])=>[i,t,e]))},[s,K]),W=a.useCallback(t=>{const n={ArrowDown:()=>P([r,o-d]),ArrowLeft:()=>P([r-d,o]),ArrowRight:()=>P([r+d,o]),ArrowUp:()=>P([r,o+d])}[t.key];n&&(t.preventDefault(),t.stopPropagation(),n(t),s.current.eventSource="keyboard")},[s,P,r,o,d]);ht(J,{onMove:t=>{const{isInteractive:e}=s.current;e&&Q(t)},onSessionEnd:()=>{const{isInteractive:t,value:e}=s.current;t&&(H(!1),B(e))},onSessionStart:t=>{const{isInteractive:e,value:n}=s.current;e&&(H(!0),at(),Q(t),V(n))}}),Pt(()=>{const{eventSource:t,value:e}=s.current;t==="keyboard"&&B(e)},[F,B]);const it=a.useCallback((t={},e=null)=>({...t,...f,...u,ref:Y(e,J),tabIndex:-1}),[f,u]),lt=a.useCallback((t={},e=null)=>{const{width:n}=N??{width:0},i={...t.style,...m.style,padding:`${n/2}px`};return{...t,ref:e,style:i}},[m,N]),ut=a.useCallback((t={},e=null)=>({...u,...t,id:l,ref:e,type:"hidden",name:k,disabled:S,readOnly:y,required:j,value:[g,r,o].toString()}),[u,l,k,g,r,o,j,S,y]),ct=a.useCallback((t={},e=null)=>({...u,...t,ref:Y(e,O)}),[u]),pt=a.useCallback((t={},e=null)=>{const{height:n,width:i}=N??{height:0,width:0},C=r*100,_=o*100,x={...t.style,bottom:`calc(${_}% - ${n/2}px)`,left:`calc(${C}% - ${i/2}px)`,position:"absolute",touchAction:"none",userSelect:"none"};return{"aria-label":"Saturation and brightness thumb","aria-roledescription":"2D slider",bg:R??xt([g,r,o])(),...u,...t,ref:Y(e,z),style:x,"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":r,"aria-valuetext":`saturation ${r}, brightness ${o}`,"data-active":Ct(G&&c),role:"slider",tabIndex:M&&c?0:void 0,onBlur:q(t.onBlur,m.onBlur),onFocus:q(t.onFocus,m.onFocus),onKeyDown:q(t.onKeyDown,W)}},[N,r,o,R,g,u,M,c,G,W,m]);return{overlays:ot,value:F,getContainerProps:it,getInnerProps:lt,getInputProps:ut,getThumbProps:pt,getTrackProps:ct}},nt=wt((c,p)=>{const[l,k]=It("SaturationSlider",c),{className:w,ratio:$=16/9,innerProps:I,inputProps:d,thumbProps:R,trackProps:D,__css:E,...A}=kt(k),{overlays:T,getContainerProps:m,getInnerProps:X,getInputProps:S,getThumbProps:y,getTrackProps:j}=jt(A),u={"& > *":{alignItems:"center",bottom:"0",display:"flex",h:"100%",justifyContent:"center",left:"0",position:"absolute",right:"0",top:"0",w:"100%"},position:"relative",_before:{content:'""',display:"block",h:0,pb:_t($,f=>`${1/f*100}%`)},...l.container,...E};return h.jsx(b.div,{className:et("ui-saturation-slider",w),__css:u,...m(),children:h.jsxs(b.div,{className:et("ui-saturation-slider__inner",w),__css:{...l.inner},...X(I),children:[h.jsx(b.input,{...S(d,p)}),T.map((f,V)=>h.jsx(b.div,{className:"ui-saturation-slider__overlay",__css:{bottom:0,left:0,position:"absolute",right:0,top:0,...l.overlay},...f},V)),h.jsx(b.div,{className:"ui-saturation-slider__track",__css:{h:"100%",position:"relative",w:"100%",...l.track},...j(D),children:h.jsx(b.div,{className:"ui-saturation-slider__thumb",__css:{...l.thumb},...y(R)})})]})})});nt.displayName="SaturationSlider";nt.__ui__="SaturationSlider";export{nt as S};
