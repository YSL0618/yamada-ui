import{r as s}from"./index-ClcD9ViR.js";import{p as m,H as k}from"./factory-Dfrbb1EY.js";const y=(t={})=>{const[c,u]=s.useState(t.defaultIsOpen??!1),a=t.open??t.isOpen,e=s.useRef(t.timing??"after"),r=m(t.onOpen),i=m(t.onClose),l=a!==void 0,o=a!==void 0?a:c,f=s.useCallback(async(...n)=>{e.current==="before"&&await r(...n),l||u(!0),e.current==="after"&&await r(...n)},[l,r,e]),p=s.useCallback(async(...n)=>{e.current==="before"&&await i(...n),l||u(!1),e.current==="after"&&await i(...n)},[l,i,e]),C=s.useCallback(async(...n)=>o?p(...n):f(...n),[o,f,p]);return{isOpen:o,open:o,onClose:p,onOpen:f,onToggle:C}},R=({disableCloseOnSuccess:t=!1,error:c,...u}={})=>{let{isOpen:a,open:e,onClose:r,onOpen:i,onToggle:l}=y(u);e=a;const o=s.useRef(void 0),f=s.useRef(k),p=s.useCallback(async(...n)=>{const O=new Promise((w,b)=>{f.current=async(...d)=>{o.current=void 0,w(),t||await r(...d)},o.current=b});await i(...n),await O},[i,r,t]),C=s.useCallback(async(...n)=>{var O;(O=o.current)==null||O.call(o,c),await r(...n)},[r,c]);return{isOpen:e,open:e,onClose:C,onOpen:p,onSuccess:f.current,onToggle:l}},g=({enabled:t,isSelected:c,mode:u="unmount",selected:a,wasSelected:e})=>(a??(a=c),!!(!t||a||u==="keepMounted"&&e));export{R as a,g as b,y as u};
