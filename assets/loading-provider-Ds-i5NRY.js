import{j as o}from"./extends-CwFRzn3r.js";import{u as _}from"./index-BhJ-TW00.js";import{r as s}from"./index-BwDkhjyp.js";import{R as T}from"./Combination-IUp2vs9T.js";import{L as F}from"./loading-DZQf4R8P.js";import{b as N,e as g,f as U,g as q,j as G}from"./factory-CBW6YcbY.js";import{A as H}from"./index-CGy0U2a3.js";import{P as J}from"./portal-DCEThVLn.js";import{m as C}from"./factory-B6ZnNkK9.js";const M=s.createContext({}),b=()=>({finish:s.createRef(),force:s.createRef(),isLoading:s.createRef(),start:s.createRef(),update:s.createRef()}),j=e=>({finish:()=>{var a,n;return(n=(a=e.current.finish).current)==null?void 0:n.call(a)},force:a=>{var n,t;return(t=(n=e.current.force).current)==null?void 0:t.call(n,a)},isLoading:()=>{var a,n;return((n=(a=e.current.isLoading).current)==null?void 0:n.call(a))??!1},start:a=>{var n,t;return(t=(n=e.current.start).current)==null?void 0:t.call(n,a)},update:a=>{var n,t;return(t=(n=e.current.update).current)==null?void 0:t.call(n,a)}}),K=e=>e+1,Q=e=>e===0?e:e-1,re=({background:e,children:a,custom:n,page:t,screen:l})=>{const c=s.useRef(b()),r=s.useRef(b()),f=s.useRef(b()),d=s.useRef(b()),k=j(c),x=j(r),L=j(f),v=j(d),y={background:L,custom:v,page:x,screen:k};return o.jsxs(M.Provider,{value:y,children:[a,o.jsx(h,{controlRefs:c,...l,component:(l==null?void 0:l.component)??((i,m)=>o.jsx(O,{ref:m,...i}))}),o.jsx(h,{controlRefs:r,...t,component:(t==null?void 0:t.component)??((i,m)=>o.jsx(E,{ref:m,...i}))}),o.jsx(h,{controlRefs:f,...e,blockScrollOnMount:(e==null?void 0:e.blockScrollOnMount)??!1,component:(e==null?void 0:e.component)??((i,m)=>o.jsx(A,{ref:m,...i}))}),o.jsx(h,{blockScrollOnMount:(e==null?void 0:e.blockScrollOnMount)??!1,controlRefs:d,...n,component:n==null?void 0:n.component})]})},h=({allowPinchZoom:e=!1,appendToParentPortal:a,blockScrollOnMount:n=!0,component:t,containerRef:l,controlRefs:c,duration:r=null,icon:f,initialState:d,text:k})=>{const x=s.useRef(!1),[{duration:L,loadingCount:v,message:y},i]=s.useState({duration:r,loadingCount:d?1:0,message:void 0}),{finish:m,force:W,isLoading:B,start:D,update:P}=s.useMemo(()=>({finish:()=>{x.current=!1,i(({loadingCount:u})=>({duration:r,loadingCount:Q(u),message:void 0}))},force:({duration:u=r,loadingCount:p=0,message:w})=>{x.current=!!p,i({duration:u,loadingCount:p,message:w})},isLoading:()=>x.current,start:({duration:u=r,message:p}={})=>{x.current=!0,i(({loadingCount:w})=>({duration:u,loadingCount:K(w),message:p}))},update:u=>i(p=>({...p,...u}))}),[r]);g(c.current.isLoading,B),g(c.current.start,D),g(c.current.finish,m),g(c.current.update,P),g(c.current.force,W);const V={duration:L,icon:f,initialState:d,message:y,text:k,onFinish:m};return U(()=>{(d||q(r))&&i({duration:r,loadingCount:d?1:0,message:void 0})},[d,r]),o.jsx(H,{initial:!1,children:v?o.jsx(J,{appendToParentPortal:a,containerRef:l,children:o.jsx(T,{allowPinchZoom:e,enabled:n,forwardProps:!0,children:o.jsx(z,{component:t,...V})})}):null})},z=s.forwardRef(({component:e,...a},n)=>typeof e=="function"?e(a,n):null);z.displayName="Render";const S=({message:e,...a})=>e?G(e)?e:o.jsx(N.p,{...a,children:e}):null,X=(e="fade")=>({animate:{opacity:1,scale:e==="scaleFade"?1:void 0,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:e==="scaleFade"?.95:void 0,transition:{duration:.4,ease:[.4,0,1,1]}},initial:{opacity:0,scale:e==="scaleFade"?.95:void 0}}),I=(e="fill")=>({alignItems:"center",bg:e==="fill"?["fallback(white, #fbfbfb)","fallback(black, #141414)"]:"fallback(blackAlpha.600, rgba(0, 0, 0, 0.48))",bottom:0,display:"flex",h:"100dvh",justifyContent:"center",left:0,p:"fallback(4, 1rem)",position:"fixed",right:0,top:0,w:"100vw",zIndex:"fallback(beerus, 9999)"}),R=(e,a="fade")=>({animate:"animate",exit:"exit",initial:e?!1:"initial",variants:X(a)}),O=s.memo(s.forwardRef(({duration:e,icon:a,initialState:n,message:t,text:l,onFinish:c},r)=>{const f={alignItems:"center",display:"flex",flexDirection:"column",gap:"fallback(2, 0.5rem)",justifyContent:"center",maxW:"24rem"};return _(c,e),o.jsx(C.div,{ref:r,className:"ui-loading-screen",...R(n),__css:I(),children:o.jsxs(N.div,{__css:f,children:[o.jsx(F,{fontSize:"6xl",...a}),o.jsx(S,{lineClamp:3,message:t,...l})]})})}));O.displayName="ScreenComponent";const E=s.memo(s.forwardRef(({duration:e,icon:a,initialState:n,message:t,text:l,onFinish:c},r)=>{const f={alignItems:"center",bg:["fallback(white, #fbfbfb)","fallback(black, #141414)"],boxShadow:["fallback(lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05))","fallback(dark-lg, 0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4))"],display:"flex",flexDirection:"column",gap:"fallback(2, 0.5rem)",justifyContent:"center",maxW:"24rem",p:"fallback(4, 1rem)",rounded:"fallback(md, 0.375rem)"};return _(c,e),o.jsx(C.div,{ref:r,className:"ui-loading-page",...R(n),__css:I("transparent"),children:o.jsxs(C.div,{className:"ui-loading-page__inner",...R(n,"scaleFade"),__css:f,children:[o.jsx(F,{fontSize:"6xl",...a}),o.jsx(S,{lineClamp:3,message:t,...l})]})})}));E.displayName="PageComponent";const A=s.memo(s.forwardRef(({duration:e,icon:a,initialState:n,message:t,text:l,onFinish:c},r)=>{const f={alignItems:"center",bg:["fallback(white, #fbfbfb)","fallback(black, #141414)"],bottom:"fallback(4, 1rem)",boxShadow:["fallback(3xl, 0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 -25px 50px -12px rgba(0, 0, 0, 0.25))","fallback(dark-lg, 0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4))"],display:"flex",gap:"fallback(2, 0.5rem)",justifyContent:"center",maxW:"20rem",p:"fallback(2, 0.5rem)",position:"fixed",right:"fallback(4, 1rem)",rounded:"fallback(md, 0.375rem)",zIndex:"fallback(beerus, 9999)"};return _(c,e),o.jsxs(C.div,{ref:r,className:"ui-loading-background",...R(n,"scaleFade"),__css:f,children:[o.jsx(F,{fontSize:"xl",...a}),o.jsx(S,{fontSize:"sm",lineClamp:1,message:t,...l})]})}));A.displayName="BackgroundComponent";const ce=()=>{const{background:e,custom:a,page:n,screen:t}=s.useContext(M);return s.useMemo(()=>({background:e,custom:a,page:n,screen:t}),[e,a,n,t])};export{re as L,ce as u};
